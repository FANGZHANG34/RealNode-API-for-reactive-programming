try{let t=({default:e})=>e;require??=e=>import(String(e)).then(t)}catch(e){console.error(e)}var require,RealCanvas,RealLoader,RealDivList,RealImgList,RealSelect,RealComtag,RealDivQueue,createRealDivSelect,createRealDivSearch,nodeRequire=require,prevent=function(){},exports=exports??{},HTMLElement=globalThis.HTMLElement??prevent,clearInterval=globalThis.clearInterval??prevent,setInterval=globalThis.setInterval??prevent,performance=globalThis.performance??Date,t0=performance.now();let browserMode="document"in globalThis,nodeMode="[object process]"===Object.prototype.toString.call(globalThis.process),RealWorld=(Reflect.set(globalThis.Array.prototype,"iterLog",function*(e,t){for("symbol"!=typeof(e="symbol"!=typeof e&&Number.isFinite(+e)?e:0)&&Number.isFinite(+t)||(t=this.length);e<t;)yield this[e++]}),(()=>{let r={writable:!1,enumerable:!1};function i(e,...t){if(!new.target)return Reflect.construct(i,arguments);this.timeSep=Number.isFinite(Number(e))?Number(e):10,this._id=setInterval(this._mainFn.bind(this),this.timeSep),this.fnList=t,this.info=void 0,this.self=browserMode?document.createElement("div"):{},this.paused=!1,this.intervalFn=this.info,this.ifFn=this.info,this.soFn=this.info,Reflect.defineProperty(this,"_id",r),Reflect.defineProperty(this,"fnList",r),Reflect.defineProperty(this,"timeSep",r)}return i.onload=browserMode?new Promise(t=>window.addEventListener("load",function e(){t(),window.removeEventListener("load",e)})):Promise.resolve(),i.onceIf=function(t){if("function"!=typeof t)return Promise.reject();let r=new i;return new Promise(e=>(r.ifFn=t,r.soFn=e)).then(()=>r.destroy())},i.cb2promise=({thisArg:i,useFn:s,callback:t=function(...e){this.resolve(e)}}={},...o)=>{if("function"!=typeof(s="function"!=typeof s?i?.[s]:s))throw new Error('=> Wrong:\n\t"thisArg" is not Object\n or\n\t"useFn" not in "thisArg" !');return new Promise(e=>{let r={callback:t,resolve:e};try{s.call(i,...o,(...e)=>r.callback(...e))}catch({stack:t}){try{s.call(i,(...e)=>r.callback(...e),...o)}catch({stack:e}){r.resolve([new Error("=> Neither head or tail of parameters is Callback !\n"+t+"\n"+e)])}}}).catch(e=>console.error(e.stack))},i.prototype.destroy=function(){return clearInterval(this._id)},i.prototype.then=function(e){return"function"==typeof e&&this.fnList.unshift(e),this},i.prototype.getRealElement=function(){return new RealElement({self:this.self,key:"innerHTML",initValue:this.self.innerHTML},{id:this.self.id})},i.prototype.setTimeSep=function(e){return(e=Number.isFinite(Number(e))?Number(e):10)!==this.timeSep&&(clearInterval(this._id),Reflect.defineProperty(this,"timeSep",{value:e}),Reflect.defineProperty(this,"_id",{value:setInterval(this._mainFn.bind(this),this.timeSep)}))},i.prototype._mainFn=function(){if(!this.paused){try{this.intervalFn?.()}catch(e){this.intervalFn=console.error(e)}try{this.info=this.fnList.pop()?.call(this,this.info)}catch(e){console.error(e)}try{this.ifFn?.()&&(this.soFn?.(),this.ifFn=this.soFn=null)}catch(t){try{this.ifFn?.()}catch(e){t=e,this.ifFn=null,this.paused=!0}this.paused||(this.soFn=null),this.paused=!1,console.error(t)}}},i})());class RealNode{static error(e){throw new Error(this.name+" : "+e)}static _sys=new Map;static t0=Date.now();static tryRealNode=!1;static now=Promise.resolve();static eventLoop=new RealWorld(4);static proto=class{tryRealNode;childRNs=[];["get"];["set"];react;id;value};static search(e){return this._sys.get(e)}static is(e,t){return Object.is(e,t)||e===t}static justNow(e,t,...r){return RealNode.now.then(e.bind(t,...r))}static arrayToObject(){for(var e=Object.create(null),t=Array.from(arguments).flat(),r=t.length,i=0;i<r;i++)e[String(t[i])]=t[i];return e}static createExpression=(r=>(e,...t)=>new RealNode({get:e,set:r},!0,...t))(()=>!1);static check(e){for(var t of this._sys.entries())if(e===t[1])return e.id===t[0]}static afterNow(t,e,r,...i){var s=new Promise(e=>this.eventLoop.then(()=>e(t.apply(r,i))));return e||(this.now=s.finally()),s}static time=(r=>e=>{let t=performance.now();return Promise.resolve("function"==typeof e?e():e).then(r,r).then(e=>({value:e,time:performance.now()-t}))})(e=>e);static copyObj=function e(t){if(Object(t)!==t)return new.target?Object(t):t;var r,i=Array.isArray(t)?[]:Object.create(null);for(r of Object.keys(t))95!==r.charCodeAt(0)&&(i[r]=e(t[r]));return i};static _react(e,t=!0,r=!0,i=!0){var s;try{for(var o=this._getPositionsOfChildRN(e);o.length;){var a=o.pop().reverse();if(!a.length)return this.realSet(e.value,t,r,i);for(s=this.proto.value;1<a.length;)s=s[a.pop()];e.value!==s[a[0]]&&(s[a[0]]=e.value)}return t&&this.react?.(i),r&&this.notify(i),!0}catch(e){if(this instanceof RealNode)throw e;this.error('Please avoid using method "react" of typeof '+this?.name+" !\n"+e.message)}}static protoCreate(e,...t){e=new RealNode({get:e});return e.proto.value=t,e}static createString=this.protoCreate.bind(null,function(){if(Array.isArray(this.proto.value)){for(var e=this.proto.value.concat(),t=e.length;0<t--;)e[t]instanceof RealNode&&(e[t]=e[t].value);return e.join("")}return String((this.proto.value instanceof RealNode?this.proto.value:this.proto).value)});static createNumber=this.protoCreate.bind(null,function(e=0){if(!Array.isArray(this.proto.value))return+(this.proto.value instanceof RealNode?this.proto.value:this.proto).value;for(var t of this.proto.value)e+=+(t instanceof RealNode?t.value:t);return e});protoGet(){return this.proto.value}log(...e){console.log(this+" :",...e)}done(){return RealNode.justNow(this.protoDone,this)}protoSet(e){return e!==this.proto.value&&(this.proto.value=e,!0)}clearChildRNs(){for(;this.proto.childRNs.length;)this.proto.childRNs.pop().display=!1;return this}error(e){throw new Error(this+'\n"""\n'+String(e)+'\n"""')}[Symbol.toPrimitive](e){try{return"number"===e?Number(this.value):"[object "+this.constructor.name+"]{ "+this.id.description+" }"}catch(e){return NaN}}async protoDone(){for(var e=0;e<this.notifyArray.length;)await Promise.allSettled(this.notifyArray[e++]);return e=this.notifyArray,this.notifyArray=[],e}notify(t,e,r){for(var i of this.relativeRNs)Promise.resolve(RealNode.search(i)).then(e=>t&&this===e||(e?.react?.(),e?.notify?.()))}realSet(e,t,r,i){var s,o=this.proto.value;try{return(this.proto.set.call(this,this.proto.tryRealNode&&(s=this._computePositionsOfRNs(e)).length?this._dealWithPositionsOfRNs(s,e):e)??o!==this.proto.value)&&(t&&this.react?.(),r&&this.notify(i),!0)}catch(e){return console.error(e),e}}_getPositionsOfChildRN(e){for(var t,r=this.proto.childRNs,i=[],s=r.length;0<s--;)e===(t=r[s].info.values()).next().value&&i.push(...t);return i}protoNotify(r,i,s=0){i?s++:i=this,(i.notifyArray[s]??=[]).push(new Promise(e=>{for(var t of this.relativeRNs)r&&t===this.id||!(t=RealNode.search(t))||(t.react?.(),t.notify(r,i,s));e()}))}relate(...e){for(var t=e[e.length-1],r=RealNode.search(t?.id??t);e.length;)"symbol"!=typeof(t=e.pop())&&(t instanceof RealNode?t=t.id:this.error('=> "relativeRNs['+e.length+']" is not legal id !')),RealNode.search(t)&&!this.relativeRNs.includes(t)&&this.relativeRNs.push(t);return r}unrelate(...e){if(!e.length)return!1;var t=this.relativeRNs.concat(),r=e.length;for(this.relativeRNs.splice(0);0<r--;)"symbol"!=typeof e[r]&&(e[r]=e[r]?.id);for(r=t.length;0<r--;)e.includes(t[r])||this.relativeRNs.push(t[r]);return t.length!==this.relativeRNs.length}_computePositionsOfRNs(e,t=2,r=[],i=0){var s,o,a=[];if(e instanceof RealNode)a.push((r.unshift(e),r));else if(i<t&&Object(e)===e)for(s=(o=Reflect.ownKeys(e)).length;0<s--;)a=a.concat(this._computePositionsOfRNs(e[o[s]],t,[...r,o[s]],i+1));return a}_dealWithPositionsOfRNs(e,t){var r,i,s,o=this.clearChildRNs().proto.childRNs,a=[];for(e=e.concat();e.length;){var[n,...l]=e.pop();if(l.length){for(r=t,i=0,s=l.length-1;i<s;i++)r=r[key];r[l[i]]=n.value}else t=n.value;(i=a.indexOf(n))<0?(a.push(n),o.push(n.relate(new RealNode({info:[n,l],react:this.constructor._react.bind(this,n)})))):o[i].info.push(l)}return t}get id(){return this.proto.id}get childRNs(){return this.proto.childRNs}get value(){return this.get()}set value(e){this.realSet(e,!0,!0)}get set(){return this.realSet}set set(e){this.proto.set="function"==typeof e?e:this.protoSet}get get(){return this.proto.get}set get(e){this.proto.get="function"==typeof e?e:this.protoGet}get react(){return this.proto.react}set react(e){this.proto.react="function"==typeof e?e:null}get display(){return RealNode._sys.has(this.id)}set display(e){e?RealNode._sys.set(this.id,this):RealNode._sys.delete(this.id)}get tryRealNode(){return this.proto.tryRealNode}set tryRealNode(e){e=(this.proto.tryRealNode=Boolean(e))?"appear":"disappear";for(var t=this.proto.childRNs.length;0<t--;)this.proto.childRNs[e]()}relativeRNs=[];notifyArray=[];constructor(e,t=RealNode.tryRealNode,...r){var{get:i,set:s,react:o,id:a,info:n}=e=Object(e);this.proto=new this.constructor.proto,this.proto.id=Symbol(String(a??n?.id??"")),Reflect.defineProperty(this,"notifyArray",{enumerable:!1}),Reflect.defineProperty(this,"proto",{enumerable:!1,writable:!1}),this.display=!0,this.info=n,this.get=i,this.set=s,this.react=o,this.relate(...r),this.tryRealNode=t,"value"in e&&(this.value=e.value)}}class RealGroup extends RealNode{static tempProxy=class extends Function{static arr=[];apply(){return this.self}["get"](e,t){return this.realGroup.get(t)}construct(){return this.realGroup.getByFilter()}deleteProperty(e,t){return Reflect.deleteProperty(this.self,t)}["set"](e,t,r){return this.realGroup.set(Object.create(null,{[t]:{value:r}}))}defineProperty(e,t,r){return Reflect.defineProperty(this.self,t,r)}constructor(e,t){super(""),this.self=e,this.realGroup=t}};static groupMap=new Map;static _=()=>!0;keys(e){return e?Reflect.ownKeys(this.proxy()):Object.keys(this.proxy())}realSet(e,t=!0,r=!0){try{return this.protoSet(e)&&(t&&this.notify(r),!0)}catch(e){return console.error(e),e}}addSetterListener(e,t){var r;t&&("function"!=typeof t&&this.error('"listener" must be function !'),e??=RealGroup._,Array.isArray(r=this.listenerMap.get(e))||this.listenerMap.set(e,r=[]),r.push(t))}protoReact(e=RealGroup.tempProxy.arr){var t,r,i,s;Array.isArray(e)||this.error('"keyArray" must be Array !');for([i,s]of this.listenerMap)if("function"==typeof i?i(e):-1!==e.indexOf(i))for(r=s.length,t=0;t<r;t++)try{s[t]()}catch(e){this.log("Wrong with ",s[t])}}getByFilter(e){for(var t=this.proxy(),r=Reflect.ownKeys(t),i="function"!=typeof e,s=Object.create(null),o=r.length;0<o--;)(i||e(r[o]))&&Reflect.set(s,r[o],t[r[o]]instanceof RealNode?t[r[o]].value:t[r[o]]);return s}protoSet(e){if(Object(e)!==e)return!1;var t,r=this.proxy(),i=[];for(t of Reflect.ownKeys(Object(e)))e[t]instanceof RealNode?(r[t]=e[t],i.push(t)):r[t]instanceof RealNode?r[t].set(e[t],!0,!0,!0)&&i.push(t):e[t]!==r[t]&&(r[t]=e[t],i.push(t));if(i.length)try{this.react?.(i)}catch(e){this.log(e.stack)}return Boolean(i.length)}protoGet(e){if(!arguments.length)return this.getByFilter();if(Object(e)!==e)return(i=this.proxy()[e])instanceof RealNode?i.value:i;for(var t=this.proxy(),r=Reflect.ownKeys(Object(e)),i=Object.create(null),s=r.length;0<s--;)Reflect.set(i,r[s],t[r[s]]instanceof RealNode?t[r[s]].value:t[r[s]]);return i}get proxy(){return this.proto.value}get set(){return this.realSet}set set(e){this.log('Invalid set "set" !')}get get(){return this.protoGet}set get(e){this.log('Invalid set "get" !')}get react(){return this.protoReact}set react(e){this.log('Invalid set "react" !')}get tryRealNode(){return!1}set tryRealNode(e){e&&this.log("I can not try realNode !")}listenerMap=new Map;constructor({id:e,info:t,self:r=Object.create(null)}={}){if(RealGroup.groupMap.get(r)instanceof RealGroup)return console.log('Please do not new for "self":'+r+" again !"),RealGroup.groupMap.get(r);super({id:e,info:t}),Object(r)!==r&&this.error('"self" not typeof object !'),Reflect.defineProperty(this,"listenerMap",{writable:!1,enumerable:!1});e=new RealGroup.tempProxy(r,this);this.proto.value=new Proxy(e,e),RealGroup.groupMap.set(r,this)}}class RealTarget extends RealNode{static proto=class extends RealNode.proto{self;isElement;transform};static idSet=new Set;static findId(e){return this.idSet.has(e)}static deleteId(e){return"string"!=typeof e&&this.error('=> Please use String "id" !'),this.idSet.delete(e)}static getRandomId(){for(var e;this.idSet.has(e="C3"+Math.floor(1e14*Math.random()).toString(36)););return e}static searchByObj(e){var t=[];if(Object(e)===e)for(var r of this._sys.values())e===r.self&&t.push(r);return t}static _react(e,t=!0,r=!0,i=!0){var s;try{for(var o=this._getPositionsOfChildRN(e);o.length;){var a=o.pop().reverse();if(!a.length)return this.realSet(e.value,t,r,i);for(s=this.proto.value;1<a.length;)s=s[a.pop()];e.value!==s[a[0]]&&(s[a[0]]=e.value)}return this.fix(),t&&this.react?.(i),r&&this.notify(i),!0}catch(e){if(this instanceof RealTarget)throw e;this.error('Please avoid using method "react" of typeof '+this?.name+" !\n"+e.message)}}protoTransform(e){return e}fix(){return this.self[this.key]=this.transform(this.proto.value),this}clearClassName(){return this.proto.isElement&&!(this.self.className="")}addClassName(){return this.proto.isElement&&(this.self.classList.add(...arguments),!0)}toggleClassName(e){return this.proto.isElement&&this.self.classList.toggle(e)}removeClassName(){return this.proto.isElement&&(this.self.classList.remove(...arguments),!0)}getIndexWithin(){for(var e=0;this.self.previousElementSibling;)e++;return e}realSet(e,t,r,i){var s;try{return(this.tryRealNode&&(s=this._computePositionsOfRNs(e)).length?this.proto.set.call(this,this._dealWithPositionsOfRNs(s,e)):this.proto.set.call(this,e))&&(this.fix(),t&&this.react?.(),r&&this.notify(i),!0)}catch(e){return console.error(e),e}}applyCSS(e,t){this.self instanceof HTMLElement||this.error("I am not RealElement !");var r=e;if("string"!=typeof e){for(;r=r?.parentElement;)if(r===this.self){e=" #"+(e.id||=RealElement.getRandomId());break}r||this.error('"selfSelector" must be String or my descendant !')}var i=this.self.id||=RealElement.getRandomId();return!!(t="string"==typeof t?RealElement.myStyle.get(t):Object(t))&&(RealElement.addCSSRules("#"+i+(/^[A-Za-z]/.test(e)?" ":"")+e,t),RealElement.addId(i,!1),!0)}clone(e,t,r){var i={self:this.self instanceof HTMLElement?this.self.cloneNode():Object.assign(Object.create(Reflect.getPrototypeOf(this.self)),this.self),key:this.key,transform:this.transform},e=(e&&(i.initValue=this.proto.value),new RealTarget(i,{get:this.proto.get,set:this.proto.set,react:this.proto.react,id:this.id.description+"-clone",info:this.info}));return Reflect.setPrototypeOf(e,Reflect.getPrototypeOf(this)),null==r&&(e.relativeRNs=r?this.relativeRNs:this.relativeRNs.concat()),t&&e.fix(),e}get isElement(){return this.proto.isElement}get transform(){return this.proto.transform}set transform(e){this.proto.transform="function"==typeof e?e:this.protoTransform}get self(){return this.proto.self}set self(e){Object(e)===e?this.proto.isElement=(this.proto.self=e)instanceof HTMLElement:this.error('=> "self" must be Object !')}constructor({self:e,key:t,transform:r,initValue:i},s,o,...a){super(s,o,...a),this.proto,this.self=e,this.key=t,this.transform=r,(o?this:this.proto).value=i,this.addClassName(this.constructor.name)}}class RealElement extends RealTarget{static myStyle=new Map;static selectorEventListeners={};static keyboardController=(browserMode&&addEventListener("keydown",e=>{var t,r,i=document.querySelector(".onkeyboardControl")??document.querySelector(".keyboardController");if(i){switch(e.key){case RealElement.keyboardController.previous:t=-1;break;case RealElement.keyboardController.next:t=1;break;case RealElement.keyboardController.enter:(r=RealTarget.searchByObj(i)[0])instanceof RealDivList?r.proto.list.length?(i.classList.remove("onkeyboardControl"),(r=r.proto.list[0]).classList.add("onkeyboardControl")):(r=i).click():(r=i.querySelector(".keyboardController"))?(i.classList.remove("onkeyboardControl"),r.classList.add("onkeyboardControl")):(r=i).click();break;case RealElement.keyboardController.back:for(r=i;(r=r.parentElement)&&!r.classList.contains("keyboardController"););(r?(i.classList.remove("onkeyboardControl"),r):r=i).classList.add("onkeyboardControl")}t&&(r=Array.from(i.parentElement.children),i.classList.remove("onkeyboardControl"),(r=r[(r.indexOf(i)+r.length+t)%r.length]).classList.add("onkeyboardControl")),r&&r.animate({opacity:[1,0,1]},{duration:500})}}),{previous:"ArrowUp",next:"ArrowDown",enter:"ArrowRight",back:"ArrowLeft"});static getDomByString=(t=>e=>(t.innerHTML=e,t.content.firstElementChild))(browserMode?document.createElement("template"):{content:{}});static createImg(){return new RealElement({self:document.createElement("img"),key:"src"})}static createVideo(){return new RealElement({self:document.createElement("video"),key:"src"})}static createAudio(){return new RealElement({self:document.createElement("audio"),key:"src"})}static createDiv(e,t=""){return new RealElement({self:document.createElement("div"),key:"textContent",initValue:t},{id:e})}static createTextarea(e){return new RealElement({self:RealElement.makeElement("textarea",{placeholder:String(e)}),key:"value"})}static makeElement(e,t,r){return e instanceof HTMLElement||(e=document.createElement(e)),Object.assign(Object.assign(e,t).style,r),e}static addId(e,t=!0){e&&("string"!=typeof e?this.error('=> Please use String "id" !'):this.idSet.has(e)?t&&this.error('=> Please use another "id" !'):this.idSet.add(e))}static applyKeyboardController(){for(var e of arguments)e instanceof HTMLElement?e.classList.add("keyboardController"):e?.self instanceof HTMLElement&&e.self.classList.add("keyboardController")}static cancelKeyboardController(){for(var e of arguments)e instanceof HTMLElement?e.classList.remove("keyboardController"):e?.self instanceof HTMLElement&&e.self.classList.remove("keyboardController")}static addEventListenerBySelectors=(e,t,r)=>{e&&"*"!==e?(RealElement.selectorEventListeners[t]||(RealElement.selectorEventListeners[t]=new Map,addEventListener(t,a=>RealElement.selectorEventListeners[t].forEach((e,t)=>{var r=a,i=e,e=t;if(Array.from(document.querySelectorAll(e)).includes(r.target))for(var s=0,o=i.length;s<o;)try{i[s++](r)}catch(r){console.error,alert(r.stack)}}))),RealElement.selectorEventListeners[t].has(e)?RealElement.selectorEventListeners[t].get(e).push(r):RealElement.selectorEventListeners[t].set(e,[r])):addEventListener(t,r)};static addCSSRules=(()=>{if(!browserMode)return()=>{};document.getElementsByTagName("head")[0].appendChild(document.createElement("style"))[!window.createPopup&&"appendChild"]?.(document.createTextNode(""));let r=document.styleSheets[document.styleSheets.length-1],l=/^\.([A-Za-z][A-Z0-9a-z]{0,})$/,h=/[A-Za-z]$/,c=/^[A-Za-z]/,d=e=>Object(e)===e?Object.keys(e):[],f=r.insertRule?(e,t)=>r.insertRule(e+"{\n"+t+"}",r.cssRules.length):(e,t)=>r.addRule(e,t,-1);return function t(r,i){if(Array.isArray(r)){let e=r.length;for(;0<e--;)"string"==typeof r[e]&&t(r[e],i)}else{"string"!=typeof r&&RealElement.error('"prefix" in addCSSRules must be String !');for(var e of d(i)){var s,o=i[e],a=[];for(s of d(o))a.push(s,":",String(o[s]),";\n");f(r+(h.test(r)&&c.test(e)?" ":"")+e+" ",a.join(""))}var n=l.exec(r)?.[1];n&&RealElement.myStyle.set(n,Object.assign({},RealElement.myStyle.get(n),i))}return t}})();static defaultInit=(()=>{var e=!1;return()=>e?RealWorld.onload:RealWorld.onload=(e=!0,RealWorld.onload.then(()=>{RealElement.addCSSRules("",{"*":{margin:"0",padding:"0",border:"0","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"},":root":{"--mapWidth":"1920px","--halfBlack":"rgba(0, 0, 0, 0.5)","--halfWhite":"rgba(225, 225, 225, 0.5)","--noColor":"rgba(0, 0, 0, 0)"},pre:{"text-align":"left","align-content":"left","vertical-align":"top","white-space":"pre-wrap","word-wrap":"break-word"},html:{cursor:"default","background-color":"black",color:"white"},body:{transform:"rotate(0)","transform-origin":"50vmin 50vmin",overflow:"visible scroll"},"body>*":{position:"absolute"},hr:{border:"1px solid white,"},"::-webkit-scrollbar":{display:"none"}})(".coverBody",{"":{width:"100vmax",height:"56.25vmax"}})(".noDisplay",{"":{display:"none"}})(".disappear",{"":{visibility:"hidden"}})(".listDown",{"":{"writing-mode":"horizontal-tb"},">*":{position:"relative",display:"block"}})(".listRight",{"":{"writing-mode":"vertical-lr"},">*":{position:"relative",display:"block"}})(".listDownListRight",{"":{"writing-mode":"horizontal-tb"},">*":{position:"relative",display:"block","writing-mode":"vertical-lr"},">*>*":{position:"relative",display:"block"}})(".listRightListDown",{"":{"writing-mode":"vertical-lr"},">*":{position:"relative",display:"block","writing-mode":"horizontal-tb"},">*>*":{position:"relative",display:"block"}})("div.listClose",{"":{"writing-mode":"horizontal-tb"},">*":{position:"absolute"},">:nth-child(1)":{"z-index":"1"},">:nth-child(2)":{"z-index":"2"},">:nth-child(3)":{"z-index":"3"},">:nth-child(4)":{"z-index":"4"},">:nth-child(5)":{"z-index":"5"},">:nth-child(6)":{"z-index":"6"},">:nth-child(7)":{"z-index":"7"},">:nth-child(8)":{"z-index":"8"},">:nth-child(9)":{"z-index":"9"},">:nth-child(10)":{"z-index":"10"},">:nth-child(11)":{"z-index":"11"},">:nth-child(12)":{"z-index":"12"},">:nth-child(13)":{"z-index":"13"},">:nth-child(14)":{"z-index":"14"},">:nth-child(15)":{"z-index":"15"}})("div.listFar",{"":{"writing-mode":"horizontal-tb"},">*":{position:"absolute"},">:nth-last-child(1)":{"z-index":"1"},">:nth-last-child(2)":{"z-index":"2"},">:nth-last-child(3)":{"z-index":"3"},">:nth-last-child(4)":{"z-index":"4"},">:nth-last-child(5)":{"z-index":"5"},">:nth-last-child(6)":{"z-index":"6"},">:nth-last-child(7)":{"z-index":"7"},">:nth-last-child(8)":{"z-index":"8"},">:nth-last-child(9)":{"z-index":"9"},">:nth-last-child(10)":{"z-index":"10"},">:nth-last-child(11)":{"z-index":"11"},">:nth-last-child(12)":{"z-index":"12"},">:nth-last-child(13)":{"z-index":"13"},">:nth-last-child(14)":{"z-index":"14"},">:nth-last-child(15)":{"z-index":"15"}})(".onhover",{":hover":{background:"linear-gradient(#fff,#000,#000,#fff)"}})(".onactive",{":active":{background:"linear-gradient(#000,#fff,#fff,#000)"}})(".childOnhover",{">:hover":{background:"linear-gradient(#fff,#000,#000,#fff)"}})(".childOnactive",{">:active":{background:"linear-gradient(#000,#fff,#fff,#000)"}})(".relativeSquare",{"":{width:"20vmin",height:"20vmin"}})(".fontTitle",{"":{"font-size":"20vmin"}})(".fontHead",{"":{"font-size":"10vmin"}})(".fontNormal",{"":{"font-size":"3vmin"}})(".scrollY",{"":{overflow:"hidden scroll"}})(".scrollX",{"":{overflow:"scroll hidden"}})(".scrollXY",{"":{overflow:"scroll"}})(".scrollNone",{"":{overflow:"hidden"}})(".centerCenter",{"":{"text-align":"center","align-items":"center","align-content":"center","vertical-align":"middle","justify-content":"center"}})(".autoFull",{"":{width:"100vmax",height:"100vmin"}})(".selfCenterCenter",{"":{left:"50%",transform:"translate(-50%,-50%)",top:"50%"}})}))})();get self(){return this.proto.self}set self(e){Object(e)===e?this.proto.isElement=(this.proto.self=e)instanceof HTMLElement:this.error('=> "self" must be HTMLElement !')}}browserMode&&(RealCanvas=class RealCanvas extends RealElement{static proto=class extends RealTarget.proto{temp=document.createElement("canvas").getContext("2d");img=new Image;isElement=!0;clearBeforeDraw=!0;ctx};static noCache=!0;static srcImageMap=new Map;static strN(e,t){for(var r=String(e).length;t-- >r;)e="0"+e;return e}static getImageBySrc=(()=>{function t(e,t,r){let i=RealCanvas.srcImageMap.get(e)??new Image;i.src?t(i):!e||"string"!=typeof e||RealCanvas.noCache&&RealCanvas.srcImageMap.has(e)?r():Object.assign(i,{onload:()=>(RealCanvas.srcImageMap.set(e,i),i.onload=i.onerror=t(i)),onerror:r,src:e})}return e=>new Promise(t.bind(null,e))})();protoTransform(){}protoGet(){return this.loaded.then(()=>this.proto.value)}clearAsync(){return this.loaded=this.loaded.then(()=>{this.clear()})}fix(e=this.proto.temp.canvas){(this.proto.clearBeforeDraw?this.clear():this.proto.ctx).drawImage(e,0,0)}testSrc(e){return this.loaded=this.loaded.then(()=>RealCanvas.getImageBySrc(e)).then(()=>!0,this.rejectSrc.bind(this,e))}clear(){return this.proto.ctx.clearRect(0,0,this.proto.self.width,this.proto.self.height),this.proto.ctx.closePath(),this.proto.ctx}clearTemp(){return this.proto.temp.clearRect(0,0,this.proto.self.width,this.proto.self.height),this.proto.temp.closePath(),this.proto.temp}rejectSrc(e,t){return e&&console.error(t instanceof Error?t:(RealCanvas.noCache&&t&&RealCanvas.srcImageMap.set(e),this+': Fail to load by src "'+e+'" !')),!1}protoSet(t){return this.loaded=this.loaded.then(()=>RealCanvas.getImageBySrc(t)).then(e=>(this.proto.img=e,this.proto.value=t,!0),this.rejectSrc.bind(this,t))}resizeBySrc(e){return this.loaded=this.loaded.then(()=>RealCanvas.getImageBySrc(e)).then(e=>{this.self.width!==e.naturalWidth&&(this.width=e.naturalWidth),this.self.height!==e.naturalHeight&&(this.height=e.naturalHeight)})}toBlob(){try{return RealWorld.cb2promise({thisArg:this.self,useFn:"toBlob"}).then(e=>e[0]instanceof Error?(console.error(e[0]),new Blob):e[0])}catch(e){return console.error(e),Promise.resolve(new Blob)}}realSet(e,t,r,i){var s;return this.loaded=Array.isArray(e)?this.multiDrawSrcArray({},...e).then(()=>{this.proto.value=e}):Promise.resolve(this.proto.set.call(this,this.proto.tryRealNode&&(s=this._computePositionsOfRNs(e)).length?this._dealWithPositionsOfRNs(s,e):e)).then(e=>e&&(this.fix(this.img),t&&this.react?.(),r&&this.notify(i),!0)).catch(e=>(console.error(e),e))}multiDrawSrcArray({bgSrc:e,autoOpacity:t,resize:r},...i){var s=-1,o=e??i[0]??!1;if(r&&o&&this.resizeBySrc(o),this.loaded=this.loaded.then(()=>this.clearTemp()),Array.isArray(e))for(o=e.length;o>++s;)this.temp=e[s];else e&&"string"==typeof e&&(this.temp=e);if(1<i.length&&t)for(s=i.length,o=0;0<s--;)this.tempOpacity=.625**s,this.temp=i[o++];else for(s=-1,o=i.length;o>++s;)this.temp=i[s];return this.loaded=this.loaded.then(()=>{this.fix(this.proto.temp.canvas)},e=>alert(e.stack))}animate({prefix:r,suffix:i,startN:s=0,length:o,midLength:a,bgSrc:n,playMode:l=0,timeSep:h=100,sizeMode:c="std",resizeAfter:d=!0}={}){let f={width:this.width,height:this.height},e=[1,2,3,5];var u=s+o+l;for(o*=e[l]??1,h/=e[l]??1;u-- >s;)this.testSrc(r+RealCanvas.strN(u,a)+i);return u=0,{loaded:this.loaded,finished:this.loaded.then(()=>{var e;let t=new RealWorld(h);switch("auto"===c&&(e=!0),l){default:for(;0<o--;)t.then(this.multiDrawSrcArray,this,{bgSrc:n,resize:e},r+RealCanvas.strN(s++,a)+i);case 1:for(;0<o--;)t.then(this.multiDrawSrcArray,this,{bgSrc:n,autoOpacity:!0,resize:e},(u=!u)||r+RealCanvas.strN(s++,a)+i,!1,r+RealCanvas.strN(s,a)+i);break;case 2:for(;0<o--;)t.then(this.multiDrawSrcArray,this,{bgSrc:n,autoOpacity:!0,resize:e},1===u?r+RealCanvas.strN(s+1,a)+i:2===u&&r+RealCanvas.strN(s,a)+i,!1,u<2?r+RealCanvas.strN(s,a)+i:r+RealCanvas.strN(s+1,a)+i),3==++u&&(s++,u%=3);break;case 3:for(;0<o--;)t.then(this.multiDrawSrcArray,this,{bgSrc:n,autoOpacity:!0,resize:e},1===u?r+RealCanvas.strN(s+1,a)+i:4===u&&r+RealCanvas.strN(s,a)+i,!1,2===u?r+RealCanvas.strN(s+1,a)+i:3===u&&r+RealCanvas.strN(s,a)+i,!1,u<3?r+RealCanvas.strN(s,a)+i:2<u&&r+RealCanvas.strN(s+1,a)+i),5==++u&&(s++,u%=5)}return t.then(()=>(this.clearTemp(),d&&Object.assign(this,f),t.destroy()))})}}get ctx(){return this.proto.ctx}get img(){return this.proto.img}get imgW(){return this.proto.img.naturalWidth}get imgH(){return this.proto.img.naturalHeight}get width(){return this.proto.self.width}set width(e){this.proto.self.width=this.proto.temp.canvas.width=e??640}get height(){return this.proto.self.height}set height(e){this.proto.self.height=this.proto.temp.canvas.height=e??360}get self(){return this.proto.self}set self(e){e instanceof HTMLCanvasElement&&(this.proto.ctx=(this.proto.self=e).getContext("2d"))}get clearBeforeDraw(){return this.loaded.then(()=>this.proto.clearBeforeDraw)}set clearBeforeDraw(e){this.loaded=this.loaded.then(()=>this.proto.clearBeforeDraw=e)}get temp(){return this.proto.temp.canvas}set temp(e){return this.proto.set.call(this,e).then(()=>(this.proto.temp.drawImage(this.img,0,0),!0),this.rejectSrc.bind(this,e))}get opacity(){return this.loaded.then(()=>this.proto.ctx.globalAlpha)}set opacity(t){Array.isArray(t)||(t=[t]),this.loaded=this.loaded.then(()=>t[0]).then(e=>{this.proto.ctx.globalAlpha=e*(t[1]??1)})}set tempOpacity(t){Array.isArray(t)||(t=[t]),this.loaded=this.loaded.then(()=>t[0]).then(e=>{this.proto.temp.globalAlpha=e*(t[1]??1)})}loaded=RealNode.now;constructor(e,t,r,i,...s){var o="string"==typeof e?document.getElementById(e):(e="",!1);o&&"canvas"!==o.tagName.toLocaleLowerCase()&&RealNode.error('=> "id" exists but not within an HTMLCanvasElement !'),RealElement.addId(e,!o),super({self:o||RealElement.makeElement("canvas",{id:e})},{id:e},i,...s),this.proto,this.width=t,this.height=r,this.proto.ctx=this.proto.self.getContext("2d")}},RealLoader=class RealLoader extends RealElement{static proto=class extends RealTarget.proto{onerror;onloadend};static fs=(()=>{class l{get stat(){return l.stat}get readdir(){return l.readdir}}return l.fetch=(()=>{let t=e=>e.status<300?[,e]:RealLoader.error("Failed request !");return browserMode&&"file:"===document.location.protocol?e=>fetch(e,{mode:"no-cors"}).then(t):e=>fetch(e).then(t)})(),l.stat=nodeMode?async e=>RealWorld.cb2promise({thisArg:await nodeRequire("fs"),useFn:"stat"},e):e=>l.fetch(e).catch(e=>[e]),l.readdir=nodeMode?async e=>RealWorld.cb2promise({thisArg:await nodeRequire("fs"),useFn:"readdir"},e):async(e,...t)=>{try{var r,i=t.length,s=[],o=i;for(/\/$/.test(e)||(e+="/");0<o--;)if(Array.isArray(t[o]))for(r=t[o].length;0<r--;)t[o][r]=String(t[o][r]);else{var a=String(t[o]);if("\\"===a[0])switch(a[1]){case"w":t[o]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";break;case"d":t[o]="0123456789"}else t[o]=[a]}for(var n=Array(i).fill(0);!("-1"in n);){for(r="",o=0;o<i;o++)r+=t[o][n[o]];for(console.log(e+r),(await l.stat(e+r))[0]||console.log(s.push(r),r),n[(o=i)-1]++;0<o--;)t[o].length>n[o]||(n[o]=0,n[o-1]++)}return[null,s]}catch(e){return[e,[]]}},new l})();static _configDescriptor=browserMode&&RealWorld.onload.then(()=>RealElement.addEventListenerBySelectors(".RealLoader","click",e=>{for(let t of RealTarget.searchByObj(e.target))if(t instanceof RealLoader){RealLoader.load(t).then(e=>e[0]?t.onerror?.(e[0]):t.onloadend?.(e[1])),t.react?.(),t.notify(!0);break}}),{writable:!1,enumerable:!1,configurable:!1});static getArrayBufferFrom(e){return Promise.resolve(e instanceof ArrayBuffer?e:ArrayBuffer.isView(e)?e.buffer:(e instanceof Blob?e:new Blob(Array.isArray(e)?e.join(""):String(e))).arrayBuffer())}static load=nodeMode?async t=>{try{if("upload"===t.type)return t.temp.click(),[];let i=await nodeRequire("fs"),s=await t.dataGetter(),[,o,a]=/(.+)(\..+)/.exec(t.temp.download)||[,"file",""];return RealWorld.cb2promise({thisArg:i,useFn:"stat"},"./"+t.temp.download).then(async e=>{if(e||this.error("Unknown Error !"),e[0])return RealLoader.getArrayBufferFrom(s).then(e=>RealWorld.cb2promise({thisArg:i,useFn:"writeFile"},"./"+t.temp.download,Buffer.from(e)));for(var r=1;;r++){1;{let t="./"+o+" - "+r+a;if((await RealWorld.cb2promise({thisArg:i,useFn:"stat"},t))[0])return RealLoader.getArrayBufferFrom(s).then(e=>RealWorld.cb2promise({thisArg:i,useFn:"writeFile"},t,Buffer.from(e))).then(e=>[e[0],r])}}})}catch(e){return[e]}}:(()=>{let r=e=>new Blob(e);return async e=>{try{var t;return"upload"===e.type?(e.temp.click(),[]):(t=await e.dataGetter(),Promise.resolve("string"==typeof t?new Blob(t):t instanceof Blob?t:RealLoader.getArrayBufferFrom(t).then(r)).then(function(e){return e=URL.createObjectURL(e),this.temp.href=e,this.temp.click(),URL.revokeObjectURL(e),[]}.bind(e)).catch(e=>[e]))}catch(e){this.error(e.stack??e)}}})();protoSet(e){this.self[this.key]=e}get files(){return"upload"===this.type?this.temp.files:this.error("I'm an downloader without files !")}get onerror(){return this.proto.onerror}set onerror(e){this.proto.onerror="function"==typeof e?e:null}get onloadend(){return this.proto.onloadend}set onloadend(e){this.proto.onloadend="function"==typeof e?e:null}get fileName(){return"upload"===this.type?this.error('Uploader bans "fileName" !'):this.temp.download}set fileName(e){"upload"===this.type&&this.error('Uploader bans "fileName" !'),"symbol"==typeof e&&this.error('"fileName" must be String but not Symbol !'),nodeMode&&!/^\.\//.test(e)&&(e="./"+e),this.temp.download=e}dataGetter;data;constructor(e,t,r,{innerHTML:i,onerror:s,onloadend:o}={}){super({self:document.createElement("div"),key:"innerHTML"}),this.proto,this.onerror=s,this.onloadend=o,this.dataGetter=r,this.value=String(i),e=Boolean(e),this.type=e?"download":"upload",this.temp=document.createElement(e?"a":"input"),Reflect.defineProperty(this,"type",RealLoader._configDescriptor),e?this.fileName=t||"file":this.temp.type="file"}},RealSelect=class RealSelect extends RealElement{static proto=class extends RealTarget.proto{list=[]};static _react(e,t=!0,r=!0,i=!0){var s,o;try{for(var a=this._getPositionsOfChildRN(e);a.length;){var n=a.pop().reverse(),l=e.value;if(!n.length)return this.realSet(l,t,r,i);for(s=this.proto.value;1<n.length;)s=s[n.pop()];if(l!==s[n[0]]&&(s[n[0]]=l),s===this.proto.value){o=0;for(var h of Object.keys(s)){if(h===n[0]){this.proto.list[o].value=String(l);break}o++}}}return t&&this.react?.(i),r&&this.notify(i),!0}catch(e){if(this instanceof RealSelect)throw e;this.error('Please avoid using method "react" of typeof '+this?.name+" !\n"+e.message)}}protoSet(e){return this.proto.value=Object.assign({},e),!0}fix(){return this.self[this.key]=this.protoTransform(this.proto.value),this.proto.list=Array.from(this.self.children),this}getValueIndexs(){for(var e=this.proto.list.length,t=[];0<e--;)this.proto.list[e].selected&&t.push(e);return t.reverse()}protoGet(){for(var e=[],t=this.proto.list,r=t.length,i=0;i<r;i++)t[i].selected&&e.push(t[i].value);return e}protoTransform(e,t=String(this.defaultKey),r=String(this.defaultValue)){this instanceof RealSelect&&!this.self.multiple&&(e=Object.assign({[t]:r},e));for(var i,s=[],o=Object.entries(e).sort((e,t)=>e[0].localeCompare(t[0])).sort((e,t)=>e[0]-t[0]).values();!(i=o.next()).done;)s.push(`<option value="${String(i.value[1])}" ${i.value[0]===t?"selected":""}>${i.value[0]}</option>`);return s.join("")}get list(){return this.proto.list}constructor(e,t,r,i,s,o,a){var n="string"==typeof e?document.getElementById(e):(e="",!1);n&&("select"===n.tagName.toLocaleLowerCase()?Object.assign(n,{multiple:t,onchange:a}):RealNode.error('=> "id" exists but not within an HTMLSelectElement !')),RealElement.addId(e,!n),super({self:n||RealElement.makeElement("select",{id:e,multiple:t,onchange:a}),key:"innerHTML",initValue:Object.assign({},r)},{id:e},i),this.proto,this.defaultKey=s??"_",this.defaultValue=o??"",this.fix()}},RealComtag=class RealComtag extends RealElement{static comtagClassMap=new Map;static defineComtagClass(e,t,r,i,s,o){/^([A-Za-z]\w*)$/.test(e)||this.error('Illegal "className" !'),this.comtagClassMap.has(e)&&this.error('"className" repeated !'),r?.[Symbol.iterator]||this.error('"optionList" must be Array !'),this.addCSSRules("."+e,s),this.comtagClassMap.set(e,[t,r,i,"function"==typeof o?o:null])}static createByClassName(e,...t){var r=this.comtagClassMap.get(e),i=(r||this.error('"className" not found !'),new RealComtag("",r[0],r[1],r[2]));return r[3].apply(i,t),i.addClassName(e),i}fix(){this.self.classList.add("disappear"),this.self.innerHTML="";for(var e of this.transform(this.proto.value))this.self.appendChild(e);return this.self.classList.remove("disappear"),this}protoTransform(e){if(e?.[Symbol.iterator]){var t,r=[];for(t of e)r.push(t instanceof HTMLElement?t:document.createElement(String(t)));return r}throw new Error('=> "value" must be Arraylike !')}protoSet(e){if(e?.[Symbol.iterator]){for(var t=this.proto.value[Symbol.iterator](),r=e[Symbol.iterator](),i=Array(2);i[0]=t.next(),i[1]=r.next(),!i[0].done^i[1].done&&!i[0].done;)if(i[0].value!==i[1].value)return this.proto.value=Array.from(e),!0;return!1}throw new Error('=> "value" must be Arraylike !')}constructor(e,t,r,i,s){var o="string"==typeof e?document.getElementById(e):(e="",!1);RealElement.addId(e,!o),super({self:o||RealElement.makeElement("div",{id:e}),initValue:r?.[Symbol.iterator]?Array.from(r):[]},{id:e},i),this.proto,this.tryHTML=t,Object.assign(this.fix().self,s)}},RealDivList=class RealDivList extends RealElement{static proto=class extends RealTarget.proto{list=[];childrenList=[]};static divListClassMap=new Map;static createList(e=0,t,r,i){for(var s=[];0<e--;)s.push(document.createElement(t));return new RealDivList(r,!0,s,!0,i)}static _react(e,t=!0,r=!0,i=!0){var s;try{for(var o=this._getPositionsOfChildRN(e);o.length;){var a=o.pop().reverse().concat(),n=e.value;if(!a.length)return this.realSet(n,t,r,i);for(s=this.proto.value;1<a.length;)s=s[a.pop()];n!==s[a[0]]&&(s[a[0]]=n),s===this.proto.value&&((a[1]=this.proto.list[a[0]]).innerHTML=""),n instanceof HTMLElement?a[1].appendChild(n):a[1][this.tryHTML?"innerHTML":"textContent"]=n}return t&&this.react?.(i),r&&this.notify(i),!0}catch(e){if(this instanceof RealDivList)throw e;this.error('Please avoid using method "react" of typeof '+this?.name+" !\n"+e.message)}}static defineDivListClass(e,t,r,i,s,o){/^([A-Za-z]\w*)$/.test(e)||this.error('Illegal "className" !'),this.divListClassMap.has(e)&&this.error('"className" repeated !'),r?.[Symbol.iterator]||this.error('"optionList" must be Array !'),this.addCSSRules("."+e,s),this.divListClassMap.set(e,[t,r,i,"function"==typeof o?o:null])}static createByClassName(e,...t){var r=this.divListClassMap.get(e),i=(r||this.error('"className" not found !'),new RealDivList("",r[0],r[1],r[2]));return r[3].apply(i,t),i.addClassName(e),i}protoGet(){return this.proto.list}protoSet(e){return this.proto.value=Array.from(e),!0}protoTransform(e){var t,r=[];if(e?.[Symbol.iterator]){for(var i=e[Symbol.iterator]();!(t=i.next()).done;)r.push(t.done=document.createElement("div")),t.value instanceof HTMLElement?t.done.appendChild(t.value):t.done[this.tryHTML?"innerHTML":"textContent"]=String(t.value);return r}throw new Error('=> "value" must be Arraylike !')}getIdDict(e,t){var r,i=Object.create(null),s=this.proto.list.length;if(e)for(;0<s--;)1<(r=this.proto.childrenList[s]).length||!r[0]?.id||(i[r[0].id]=new RealElement({self:this.proto.list[s],key:t}));else for(;0<s--;)1<(r=this.proto.childrenList[s]).length||!r[0]?.id||(i[r[0].id]=this.proto.list[s]);return i}getRealEmentList(){for(var e=this.proto.list.concat(),t=e.length;0<t--;)e[t]=new RealElement({self:e[t]});return e}fix(){for(var e=0,t=(this.self.classList.add("disappear"),this.self.innerHTML="",this.proto.list=this.transform(this.proto.value)),r=this.proto.childrenList=[];e<t.length;)r.push(Array.from(this.self.appendChild(t[e++]).children));return this.self.classList.remove("disappear"),this}get childrenList(){return this.proto.childrenList}constructor(e,t,r,i,s){var o="string"==typeof e?document.getElementById(e):(e="",!1);RealElement.addId(e,!o),super({self:o||RealElement.makeElement("div",{id:e}),initValue:r?.[Symbol.iterator]?Array.from(r):[]},{id:e},i),this.proto,this.tryHTML=t,Object.assign(this.fix().self,s)}},RealImgList=class RealImgList extends RealDivList{static _react(e,t=!0,r=!0,i=!0){var s;try{for(var o=this._getPositionsOfChildRN(e);o.length;){var a=o.pop().reverse(),n=e.value;if(!a.length)return this.realSet(n,t,r,i);for(s=this.proto.value;1<a.length;)s=s[a.pop()];n!==s[a[0]]&&(s[a[0]]=n),s===this.proto.value&&(this.proto.childrenList[a[0]][0].src=String(n?.src??n))}return t&&this.react?.(i),r&&this.notify(i),!0}catch(e){if(this instanceof RealImgList)throw e;this.error('Please avoid using method "react" of typeof '+this?.name+" !\n"+e.message)}}cloneImgList(){for(var e=this.childrenList.concat(),t=e.length;0<t--;)e[t]=e[t][0].cloneNode();return e}protoTransform(e){var t,r=[];if(!e?.[Symbol.iterator])throw new Error('=> "value" must be Arraylike !');for(var i=e[Symbol.iterator]();!(t=i.next()).done;)r.push(t.done=document.createElement("div")),t.done.appendChild(t.value instanceof Image?t.value:Object.assign(new Image,{src:String(t.value)}));return r}protoSet(e){if(e?.[Symbol.iterator]){for(var t=this.proto.value[Symbol.iterator](),r=e[Symbol.iterator](),i=Array(2);i[0]=t.next(),i[1]=r.next(),!i[0].done^i[1].done&&!i[0].done;)if((i[0].value?.src??String(i[0].value))!==(i[1].value?.src??String(i[1].value)))return this.proto.value=Array.from(e),!0;return!1}throw new Error('=> "value" must be Arraylike !')}constructor(e,t,r,i){super(e,!0,t,r,i)}},RealDivQueue=class RealDivQueue extends RealDivList{static proto=class extends RealDivList.proto{queueArray};static tempTarget=void(browserMode&&(RealWorld.onload.then(()=>RealElement.addCSSRules(".RealDivQueue",{">div":{transition:".1s"},">div:hover":{transform:"scale(1.1,1)"},">div:active":{transform:"scale(1.2,1)"}})),addEventListener("mousedown",e=>RealDivQueue.tempTarget=e.target),addEventListener("mouseup",e=>{for(var t,r,i=[r=RealDivQueue.tempTarget];r=r.parentElement;)i.push(r);for(var s=[r=e.target];r=r.parentElement;)s.push(r);if(i.pop()===s.pop()){for(r=[];(r[0]=i.pop())===(r[1]=s.pop());)if(!i.length)return;var[e,o]=r;if(e&&o){var a=e.parentElement;if(a.classList.contains("RealDivQueue")){for(t of RealTarget.searchByObj(a))if(t instanceof RealDivQueue)break;a=t.queueArray,a=(r[0]=a.indexOf(t.proto.list.indexOf(r[0])))>(r[1]=a.indexOf(t.proto.list.indexOf(r[1])))?[...a.iterLog(0,r[1]),a[r[0]],...a.iterLog(r[1],r[0]),...a.iterLog(r[0]+1)]:[...a.iterLog(0,r[0]),...a.iterLog(r[0]+1,r[1]+1),a[r[0]],...a.iterLog(r[1]+1)],t.applyQueue(a,e,o)}}}})));getListQueue(){for(var e=this.queueArray,t=e.length;0<t--;)e[t]=this.proto.list[e[t]];return e}fix(){for(var e=0,t=this.proto.list=this.transform(this.proto.value),r=this.proto.childrenList=[];e<t.length;)r.push(Array.from(this.self.appendChild(t[e++]).children));return this.applyQueue([])}applyQueue(e,t,r){for(var i=this.queueArray??[],s=Array.isArray(e),o=(e=s?e.slice(0,this.proto.list.length):i,this.proto.list.concat()),a=o.length,n=this.self.scrollTop,l=this.self.scrollLeft,h=a;0<h--;)e[h]??=h,-1===e.indexOf(h)&&this.error('Illegal "queueArray" !');if(~(h=[i.indexOf(this.proto.list.indexOf(t)),i.indexOf(this.proto.list.indexOf(r))])[0]&&~h[1])h[0]<h[1]?r.insertAdjacentElement("afterend",t):r.insertAdjacentElement("beforebegin",t);else{for(this.self.classList.add("disappear"),this.self.innerHTML="",h=0;h<a;)this.self.appendChild(o[e[h++]]);this.self.scrollTo({top:n,left:l,behavior:"instant"}),this.self.classList.remove("disappear")}return this.proto.queueArray=e,s&&(this.react?.(),this.notify(!0)),this}get queueArray(){return this.proto.queueArray?.concat?.()}},createRealDivSelect=(e,t,r)=>RealDivList.createByClassName("realDivSelect",e,t,r),RealWorld.onload=RealWorld.onload.then(()=>RealDivList.defineDivListClass("realDivSelect",!1,[],!0,{"":{background:"linear-gradient(135deg,#fff,#000)"},">div":{"background-color":"#333",transform:"scale(0.8,1)"},">div:hover":{transform:"scale(0.9,1)"},">.selected":{"background-color":"#555",transform:"scale(1)","font-weight":"bolder"}},(()=>{let t={bubbles:!0,cancelable:!1};function i(){for(var e=[],t=this.proto.list,r=0;t[r];r++)t[r].classList.contains("selected")&&e.push(this.info.optionList[r]);return this.info.multiple||e.length||!r||(t[0].classList.add("selected"),e.push(this.info.optionList[0])),e}function s(e){for(var t of(this.info.optionList=[],this.proto.value=Object.keys(e=Object(e)).sort().sort((e,t)=>e-t)))this.info.optionList.push(e[t]);return this.fix().value,!1}function a(e){e.react?.(),e.self.dispatchEvent(new Event("change",t)),e.notify()}return RealElement.addEventListenerBySelectors(".realDivSelect>div","click",({target:e})=>{for(var t,r=RealTarget.searchByObj(e.parentElement),i=0;(t=r.pop())&&(!t||!t.self.classList.contains("realDivSelect")););if(t){var s=t,o=s.value[0],r=s.proto.list;if(s.info.multiple)e.classList.toggle("selected"),a(s);else{for(;t=r[i++];)t.classList[e===t?"add":"remove"]("selected");o!==s.value[0]&&a(s)}}}),function(e,t,r){this.get=i,this.set=s,this.info=Object(this.info),this.info.multiple=Boolean(t),"function"==typeof r&&(this.self.onchange=r.bind(this)),this.value=e}})())),createRealDivSearch=e=>RealDivList.createByClassName("realDivSearch",e),RealWorld.onload=RealWorld.onload.then(()=>RealDivList.defineDivListClass("realDivSearch",!0,[],!0,{">:nth-child(2)>div>div:hover":{transform:"scale(0.9,1)"}},(()=>{var i;let s={bubbles:!0,cancelable:!1};function r(){return this.info.inputer.value}function o(e){return Array.isArray(e)?this.info.wordList=e:this.error('"value must be Array !'),this.info.inputer.dispatchEvent(new Event("change",s)),!((i??=this).info.matcher.value={})}return addEventListener("click",t=>RealNode.afterNow(()=>{var e;e=t.target,i&&e!==i.info.inputer&&(i.info.matcher.value={},i.react?.(),i.notify(!0))})),addEventListener("keyup",e=>{for(var t,r=RealTarget.searchByObj(document.activeElement?.parentElement?.parentElement);(t=r.pop())&&(!t||!t.self.classList.contains("realDivSearch")););!t||1!==e.key.length&&"Backspace"!==e.key&&"Delete"!==e.key||t.info.inputer.dispatchEvent(new Event("change",s))}),RealElement.addEventListenerBySelectors(".realDivSearch>:nth-child(2)>div>div","click",e=>{for(var t,r=RealTarget.searchByObj(e.target.parentElement.parentElement.parentElement);(t=r.pop())&&(!t||!t.self.classList.contains("realDivSearch")););t&&(t.info.inputer.value=t.info.matcher.value[0],(i=t).react?.(),i.notify(!0))}),RealElement.addEventListenerBySelectors(".realDivSearch>:nth-child(1)>textarea","change",e=>{for(var r,t=RealTarget.searchByObj(e.target.parentElement.parentElement);(r=t.pop())&&(!r||!r.self.classList.contains("realDivSearch")););if(r){let t=new RegExp(r.info.inputer.value,"i");r.info.matcher.value=RealNode.arrayToObject(r.info.wordList.filter(e=>t.test(String(e))))}}),RealElement.addEventListenerBySelectors(".realDivSearch>:nth-child(1)>textarea","click",e=>{e.target.dispatchEvent(new Event("change",s))}),function(e){var t=RealDivList.createByClassName("realDivSelect");this.proto.value=['<textarea placeholder="'+String(e)+'"></textarea>',t.self],this.fix().info=Object(this.info),this.info.inputer=this.proto.childrenList[0][0],this.info.matcher=t,this.info.wordList=[],this.get=r,this.set=o}})())));let RealStory=(()=>{function t(){if(!new.target)return new t;this.resolve=null,this.reject=null,this.self=new Promise(function(e,t){this.resolve=e,this.reject=t}.bind(this))}class r{newPage(){return new r(this)}newPrivatePage(t){return new Promise(e=>e(t?.(this.newPage())))}then(e){return"function"==typeof e&&this.fnList.unshift(e),this}getNextPage(){var e;if(this.ofStory instanceof r)return(e=this.ofStory.pages)[e.indexOf(this)+1]}getPreviousPage(){var e;if(this.ofStory instanceof r)return(e=this.ofStory.pages)[e.indexOf(this)-1]}newPromiseObj(){let e=new t;return this.then(()=>e.self),e}async launch(){for(var t=0,e=this;(e=e.ofStory)instanceof r;)t++;for(;this.pages.length||this.fnList.length;){for(;this.fnList.length;)try{this.info=await this.fnList.pop()?.(this.info)}catch(e){console.error("Depth of the fn : "+t+"\n"+String(e?.stack??e))}try{await this.pages.shift()?.launch?.()}catch(e){console.error("Depth of the page : "+t+"\n"+String(e?.stack??e))}}}get StoryPromise(){return t}get index(){return this.ofStory instanceof r?this.ofStory.pages.indexOf(this):-1}ofStory;pages=[];fnList=[];info;constructor(e){(this.ofStory=e instanceof r&&e)&&e.pages.push(this)}}var e,i=!1;return r.prototype.constructor=null,e=new r,setInterval(()=>i||(i=!0,e.launch().then(()=>i=!1)),50),e})(),RealPromise=new class{catch(e){return this.self=this.self.catch(e),this}finally(e){return this.self=this.self.finally(e),this}_push(e){return e!==this.list[this.list.length-1]&&this.list.push(e),e}then(e,t){return this.self=this.self.then(e,t).then(this._push),this}async tryHandler(e){if("function"!=typeof e)throw new TypeError('"handler" must be Function !');try{await this.self}catch(e){}for(var t=this.list.length;0<t--;)try{return e(await this.list[t])}catch(e){console.error(e)}}list=[];constructor(e){Reflect.defineProperty(this,"list",{enumerable:!1,writable:!1}),Reflect.defineProperty(this,"_push",{value:this._push.bind(this),enumerable:!1,writable:!1}),this.self=arguments.length?("function"==typeof e?new Promise(e):Promise.resolve(e)).then(this._push):Promise.resolve()}};console.log(performance.now()-t0,"ms"),Object.assign(exports,{RealWorld:RealWorld,RealNode:RealNode,RealGroup:RealGroup,RealTarget:RealTarget,RealElement:RealElement,RealCanvas:RealCanvas,RealLoader:RealLoader,RealSelect:RealSelect,RealComtag:RealComtag,RealDivList:RealDivList,RealImgList:RealImgList,RealDivQueue:RealDivQueue,createRealDivSelect:createRealDivSelect,createRealDivSearch:createRealDivSearch,RealStory:RealStory,RealPromise:RealPromise});
//# sourceMappingURL=real-node.min.js.map