var RealWorld,RealNode,RealGroup,RealTarget,RealStory,RealPromise,RealElement,RealCanvas,RealLoader,RealSelect,RealComtag,RealDivList,RealImgList,RealDivQueue,createRealDivSelect,createRealDivSearch,createRealDivSeries;export default{RealWorld,RealNode,RealGroup,RealTarget,RealStory,RealPromise,RealElement,RealCanvas,RealLoader,RealSelect,RealComtag,RealDivList,RealImgList,RealDivQueue,createRealDivSelect,createRealDivSearch,createRealDivSeries}=(()=>{function o(t){return t}let l=globalThis.Element??o,s=globalThis.performance??Date,i=globalThis.setInterval??o,n=globalThis.clearInterval??o,t=s.now(),d=l!==o,a={writable:!1,enumerable:!1},p=console.log.bind(console);var e,r,h=!1;try{r=require,e=module.exports,h=!0}catch{e={},r=e=>new Promise(async t=>t((await import(String(e))).default))}let c=r("fs");u.onload=d?new Promise(e=>addEventListener("load",function t(){e(),removeEventListener("load",t)})):Promise.resolve(),u.createInterval=function(t,e){return(t=new u(t)).intervalFn=e,t},u.getPromiseState=(()=>{let e=Symbol(),r=t=>+(e!==t),i=()=>-1;return function(t){return Promise.race([t,e]).then(r,i)}})(),u.onceIf=async(e,t)=>{if("function"!=typeof e)throw new TypeError('"ifFn" must be Function !');let r=new u(t);await new Promise(t=>(r.ifFn=e,r.soFn=t)),n(r._id)},u.cb2promise=function({thisArg:i,useFn:s,callback:e=function(...t){this.resolve(t)}}={},...o){if("function"!=typeof(s="function"!=typeof s?i?.[s]:s))throw new Error('=> Wrong:\n\t"thisArg" is not Object\n or\n\t"useFn" not in "thisArg" !');return new Promise(t=>{let r={callback:e,resolve:t};try{s.call(i,...o,(...t)=>r.callback(...t))}catch(e){try{s.call(i,(...t)=>r.callback(...t),...o)}catch(t){r.resolve([new Error("=> Neither head or tail of parameters is Callback !\n"+String(e?.stack??e)+"\n"+String(t?.stack??t))])}}}).catch(t=>console.error(t.stack))},u.prototype.destroy=function(){n(this._id),this._mainFn()},u.prototype.then=function(t){return"function"==typeof t&&this.fnList.unshift(t),this},u.prototype.getRealElement=function(){return new R({self:this.self,key:"innerHTML"},{id:this.self.id,initValue:this.self.innerHTML})},u.prototype.setTimeSep=function(t){return(Number.isFinite(t=Number(t))?t:10)!==this.timeSep&&(n(this._id),Reflect.defineProperty(this,"timeSep",{value:t}),Reflect.defineProperty(this,"_id",{value:i(this._mainFn.bind(this),this.timeSep)}))},u.prototype._mainFn=function(){if(!this.paused){try{this.intervalFn?.()}catch(t){this.intervalFn=console.error(t)}try{this.info=this.fnList.pop()?.call?.(this,this.info)}catch(t){console.error(t)}try{this.ifFn?.()&&(this.soFn?.(),this.ifFn=this.soFn=null)}catch(e){try{this.ifFn?.()}catch(t){e=t,this.ifFn=null,this.paused=!0}this.paused||(this.soFn=null),this.paused=!1,console.error(e)}}};var f,m=u;function u(t,...e){if(!new.target)return new u(t,...e);try{Number.isFinite(this.timeSep=Number(t))||(this.timeSep=10)}catch{this.timeSep=10}this._id=i(this._mainFn.bind(this),this.timeSep),this.fnList=e,this.info=f,this.self=d?document.createElement("div"):{},this.paused=!1,this.intervalFn=f,this.ifFn=f,this.soFn=f,Reflect.defineProperty(this,"_id",a),Reflect.defineProperty(this,"fnList",a),Reflect.defineProperty(this,"timeSep",a)}var y,g,v,b=class b{static error(t){throw new Error(this.name+" : "+t)}static _sys=new Map;static t0=Date.now();static tryRealNode=!1;static now=Promise.resolve();static eventLoop=new m;static proto=class{tryRealNode;childRNs=[];["get"];["set"];react;id;value};static search(t){return this._sys.get(t)}static is(t,e){return Object.is(t,e)||t===e}static justNow(t,e,...r){return b.now.then(t.bind(e,...r))}static arrayToObject(){for(var t=Object.create(null),e=Array.from(arguments).flat(),r=e.length,i=0;i<r;i++)t[String(e[i])]=e[i];return t}static createExpression=(g=()=>!1,(t,...e)=>new b({get:t,set:g},!0,...e));static check(t){for(var e of this._sys.entries())if(t===e[1])return t.id===e[0]}static createHidden=(y={display:!1},function(t){return new b(Object.assign({},t,y))});static afterNow(e,t,r,...i){var s=new Promise(t=>this.eventLoop.then(()=>t(e.apply(r,i))));return t||(this.now=s.catch(o)),s}static protoCreate(t,...e){t=new b({get:t});return t.proto.value=e,t}static createNumber=this.protoCreate.bind(null,function(t=0){if(!Array.isArray(this.proto.value))return+(this.proto.value instanceof b?this.proto.value:this.proto).value;for(var e of this.proto.value)t+=+(e instanceof b?e.value:e);return t});static copyObj=function t(e){if(Object(e)!==e)return new.target?Object(e):e;var r,i=Array.isArray(e)?[]:Object.create(null);for(r of Object.keys(e))95!==r.charCodeAt(0)&&(i[r]=t(e[r]));return i};static createString=this.protoCreate.bind(null,function(){if(Array.isArray(this.proto.value)){for(var t=this.proto.value.concat(),e=t.length;0<e--;)t[e]instanceof b&&(t[e]=t[e].value);return t.join("")}return String((this.proto.value instanceof b?this.proto.value:this.proto).value)});static async time(t,e){var r=s.now(),i={time:null,error:null,value:null};try{i.value=await("function"==typeof t?t():t)}catch(t){console.error(i.error=t)}if(i.time=s.now()-r,"function"==typeof e)try{e(i.time,i.error,i.value)}catch(t){console.error(t)}return i}static makeNumStr0oTail(t,e){var r,i;switch(typeof t){case"bigint":return t.toString();case"symbol":case"undefined":return"NaN"}try{t=+t}catch{return"NaN"}return Number.isFinite(t)?(e="number"!=typeof e?9:18<e?18:e<0?0:Math.floor(e),{0:r,1:i=""}=t.toString(8).split("."),BigInt("0o"+r).toString()+"_+0o"+i.slice(0,e).padEnd(e,"0")):"NaN"}static _react(t,e=!0,r=!0,i=!0){try{for(var s,o=this._getPositionsOfChildRN(t);o.length;){var n=o.pop().reverse();if(!n.length)return this.realSet(t.value,e,r,i);for(s=this.proto.value;1<n.length;)s=s[n.pop()];t.value!==s[n[0]]&&(s[n[0]]=t.value)}return e&&this.react?.(i),r&&this.notify(i),!0}catch(t){if(this instanceof b)throw t;this.error('Please avoid using method "react" of typeof '+this?.name+" !\n"+t.message)}}protoReact(){}protoGet(){return this.proto.value}log(...t){console.log(this+":",...t)}done(){return b.justNow(this.protoDone,this)}error(t){throw new Error(this+'\n"""\n'+String(t)+'\n"""')}protoSet(t){return t!==this.proto.value&&(this.proto.value=t,!0)}clearChildRNs(){for(;this.proto.childRNs.length;)this.proto.childRNs.pop().display=!1;return this}realReact(t=!0,e){var r=this.proto.react;return!!r&&(r.call(this),t&&this.notify(e),!0)}[Symbol.toPrimitive](t){try{return"number"===t?Number(this.value):"[object "+this.constructor.name+"]{ "+this.id.description+" }"}catch{return NaN}}async protoDone(){for(var t=0;t<this.notifyArray.length;)await Promise.allSettled(this.notifyArray[t++]);return t=this.notifyArray,this.notifyArray=[],t}notify(e,t,r){for(var i of this.relativeRNs)Promise.resolve(b.search(i)).then(t=>!t||e&&this===t||t.realReact?.())}realSet(t,e,r,i){try{var s;return(this.proto.set.call(this,this.proto.tryRealNode&&(s=this._computePositionsOfRNs(t)).length?this._dealWithPositionsOfRNs(s,t):t)??!0)&&(e&&this.react?.(),r&&this.notify(i),!0)}catch(t){return console.error(t),t}}_getPositionsOfChildRN(t){for(var e,r=this.proto.childRNs,i=[],s=r.length;0<s--;)t===(e=r[s].info.values()).next().value&&i.push(...e);return i}protoNotify(r,i,s=0){i?s++:i=this,(i.notifyArray[s]||(i.notifyArray[s]=[])).push(new Promise(t=>{for(var e of this.relativeRNs)r&&e===this.id||!(e=b.search(e))||(e.react?.(),e.notify(r,i,s));t()}))}relate(...t){for(var e=t[t.length-1],r=b.search(e?.id??e);t.length;)"symbol"!=typeof(e=t.pop())&&(e instanceof b?e=e.id:this.error('=> "relativeRNs['+t.length+']" is not legal id !')),b.search(e)&&!this.relativeRNs.includes(e)&&this.relativeRNs.push(e);return r}unrelate(...t){if(!t.length)return!1;var e=this.relativeRNs.concat(),r=t.length;for(this.relativeRNs.splice(0);0<r--;)"symbol"!=typeof t[r]&&(t[r]=t[r]?.id);for(r=e.length;0<r--;)t.includes(e[r])||this.relativeRNs.push(e[r]);return e.length!==this.relativeRNs.length}_computePositionsOfRNs(t,e=2,r=[],i=0){var s,o,n=[];if(t instanceof b)n.push((r.unshift(t),r));else if(i<e&&Object(t)===t)for(s=(o=Reflect.ownKeys(t)).length;0<s--;)n=n.concat(this._computePositionsOfRNs(t[o[s]],e,[...r,o[s]],i+1));return n}_dealWithPositionsOfRNs(t,e){var r,i,s,o=this.clearChildRNs().proto.childRNs,n=[];for(t=t.concat();t.length;){var a=t.pop(),l=a[0],a=a.slice(1);if(a.length){for(r=e,i=0,s=a.length-1;i<s;i++)r=r[key];r[a[i]]=l.value}else e=l.value;(i=n.indexOf(l))<0?(n.push(l),o.push(l.relate(new b({info:[l,a],react:this.constructor._react.bind(this,l)})))):o[i].info.push(a)}return e}get id(){return this.proto.id}get childRNs(){return this.proto.childRNs}get value(){return this.get()}set value(t){this.realSet(t,!0,!0)}get set(){return this.realSet}set set(t){this.proto.set="function"==typeof t?t:this.protoSet}get get(){return this.proto.get}set get(t){this.proto.get="function"==typeof t?t:this.protoGet}get react(){return this.proto.react}set react(t){this.proto.react="function"==typeof t?t:t?this.protoReact:null}get display(){return b._sys.has(this.id)}set display(t){t?b._sys.set(this.id,this):b._sys.delete(this.id)}get tryRealNode(){return this.proto.tryRealNode}set tryRealNode(t){t=(this.proto.tryRealNode=Boolean(t))?"appear":"disappear";for(var e=this.proto.childRNs.length;0<e--;)this.proto.childRNs[t]()}relativeRNs=[];notifyArray=[];constructor(t,e=b.tryRealNode,...r){t=Object(t),this.proto=new this.constructor.proto,this.proto.id=Symbol(String(t.id??t.info?.id??"")),Reflect.defineProperty(this,"notifyArray",{enumerable:!1}),Reflect.defineProperty(this,"proto",a),this.display=t.display??!0,this.info=t.info,this.get=t.get,this.set=t.set,this.react=t.react,this.relate(...r),this.proto.value=t.initValue,this.tryRealNode=e,"value"in t&&(this.value=t.value)}},w=class w extends b{static tempProxy=class extends Function{static arr=[];apply(){return this.self}ownKeys(){return Reflect.ownKeys(this)}has(t,e){return Reflect.has(this,e)}construct(){return this.realGroup.getByFilter()}isExtensible(){return Reflect.isExtensible(this)}["get"](t,e){return this.realGroup.get(e)}preventExtensions(){return Reflect.preventExtensions(this)}deleteProperty(t,e){return Reflect.deleteProperty(this.self,e)}setPrototypeOf(t,e){return Reflect.setPrototypeOf(this,e)}["set"](t,e,r){return this.realGroup.set(Object.create(null,{[e]:{value:r}}))}defineProperty(t,e,r){return Reflect.defineProperty(this.self,e,r)}constructor(t,e){super(""),this.self=t,this.realGroup=e}};static groupMap=new Map;static _=()=>!0;static createDeepGroup=function t(e,r="",i,s){if(Object(e)!==e)return s?i?b.createHidden({id:r,initValue:e}):e:new w;var o=Reflect.getPrototypeOf(e);if(o&&o!==Object.prototype)return s?i?b.createHidden({id:r,initValue:e}):e:new w({self:e});for(var n=Object.create(null),a=Reflect.ownKeys(e),l=a.length,h=0;h<l;h++)n[a[h]]=t(e[a[h]],a[h],i,!0);return new w({self:n})};static getObjByStructure=(()=>{let a=(t,e)=>{var r,i,s,o;switch(e){case"string":try{return String(t)}catch{}try{return String(t[Symbol.toPrimitive]())}catch{}try{return String(t.toString())}catch{}try{return String(t.valueOf())}catch{}try{return Object.prototype.toString.call(t)}catch{}return"[object Object]";case"number":try{return Number(t)}catch{return NaN}case"boolean":return Boolean(t);case"undefined":case"null":return null;case"array":if(Array.isArray(t))return t;try{for(s=[],i=Object.keys(t),r=0;;){var n=+(o=i[r++]);if(!(Number.isInteger(n)&&-1<n))return s;try{s[n]=t[n]}catch(t){console.error(t)}}}catch{return s}}if(Object(e)!==e)return t;for(t=Object(t),s=Object.create(null),r=(i=Object.keys(e)).length;0<r--;)try{e[o=i[r]];try{s[o]=a(t[o],e[o])}catch(t){s[o]=a(null,e[o]),console.error(t)}}catch(t){s[o]=null,console.error(t)}return s};return a})();keys(t){return t?Reflect.ownKeys(this.proxy()):Object.keys(this.proxy())}realSet(t,e,r){try{return this.protoSet(t)&&(e&&this.notify(r),!0)}catch(t){return console.error(t),t}}addSetterListener(t,e){var r;e&&("function"!=typeof e&&this.error('"listener" must be function !'),t=t??w._,Array.isArray(r=this.listenerMap.get(t))||this.listenerMap.set(t,r=[]),r.push(e))}protoReact(s=w.tempProxy.arr){Array.isArray(s)||this.error('"keyArray" must be Array !'),this.listenerMap.forEach((e,r)=>{try{if("function"==typeof r?r(s):-1!==s.indexOf(r))for(var t=e.length,i=0;i<t;i++)try{e[i]()}catch(t){this.log("Wrong with ",e[i])}}catch(t){this.log("Wrong with ",r)}})}tryRealNodeSetter(){for(var t=this.proxy(),e=Reflect.ownKeys(t),r=e.length;0<r--;)Reflect.has(Reflect.getOwnPropertyDescriptor(t,e[r]),"get")||t[e[r]]instanceof b||(t[e[r]]=b.createHidden({initValue:t[e[r]]}));return this}getByFilter(t){for(var e=this.proxy(),r=Reflect.ownKeys(e),i="function"!=typeof t,s=Object.create(null),o=r.length;0<o--;)(i||t(r[o]))&&Reflect.set(s,r[o],e[r[o]]instanceof b?e[r[o]].value:e[r[o]]);return s}protoSet(t){if(Object(t)!==t)return!1;var e,r=this.proxy(),i=[];for(e of Reflect.ownKeys(Object(t)))t[e]instanceof b?(r[e]=t[e],i.push(e)):r[e]instanceof b?r[e].set(t[e],!0,!0,!0)&&i.push(e):t[e]!==r[e]&&(r[e]=t[e],i.push(e));if(this.listenerMap.get(w._).forEach(t=>t()),i.length)try{this.react?.(i)}catch(t){this.log(t?.stack??t)}else for(var s=this.listenerMap.get(w._),o=s.length,n=0;n<o;n++)try{s[n]()}catch(t){this.log("Wrong with ",s[n])}return Boolean(i.length)}protoGet(t){if(!arguments.length)return this.getByFilter();if(Object(t)!==t)return(i=this.proxy()[t])instanceof b?i.value:i;for(var e=this.proxy(),r=Reflect.ownKeys(Object(t)),i=Object.create(null),s=r.length;0<s--;)Reflect.set(i,r[s],e[r[s]]instanceof b?e[r[s]].value:e[r[s]]);return i}get proxy(){return this.proto.value}get set(){return this.realSet}set set(t){}get get(){return this.protoGet}set get(t){}get react(){return this.protoReact}set react(t){}get tryRealNode(){return!1}set tryRealNode(t){t&&this.log("I can not try realNode !")}listenerMap=new Map([[w._,[]]]);constructor({id:t,info:e,self:r=Object.create(null)}={}){var i;if((i=w.groupMap.get(r))instanceof w)return console.log('Please do not new for "self":'+r+" again !"),i;super({id:t,info:e}),Object(r)!==r&&this.error('"self" not typeof object !'),Reflect.defineProperty(this,"listenerMap",a),i=new w.tempProxy(r,this),this.proto.value=new Proxy(i,i),w.groupMap.set(r,this)}},S=class S extends b{static proto=class extends b.proto{self;isElement;transform};static searchByObj(t){var e=[];if(Object(t)===t)for(var r of S._sys.values())t===r.self&&e.push(r);return e}static _react(t,e=!0,r=!0,i=!0){try{for(var s,o=this._getPositionsOfChildRN(t);o.length;){var n=o.pop().reverse();if(!n.length)return this.realSet(t.value,e,r,i);for(s=this.proto.value;1<n.length;)s=s[n.pop()];t.value!==s[n[0]]&&(s[n[0]]=t.value)}return this.fix(),e&&this.react?.(i),r&&this.notify(i),!0}catch(t){if(this instanceof S)throw t;this.error('Please avoid using method "react" of typeof '+this?.name+" !\n"+t.message)}}protoTransform(t){return t}fix(){return this.self[this.key]=this.transform(this.proto.value),this}clearClassName(){return this.proto.isElement&&!(this.proto.self.className="")}addClassName(){return this.proto.isElement&&(this.proto.self.classList.add(...arguments),!0)}toggleClassName(t){return this.proto.isElement&&this.proto.self.classList.toggle(t)}removeClassName(){return this.proto.isElement&&(this.proto.self.classList.remove(...arguments),!0)}getIndexWithin(){for(var t=0,e=this.proto.self;e=e.previousElementSibling;)t++;return t}realSet(t,e,r,i){try{var s;return(this.proto.set.call(this,this.tryRealNode&&(s=this._computePositionsOfRNs(t)).length?this._dealWithPositionsOfRNs(s,t):t)??!0)&&(this.fix(),e&&this.react?.(),r&&this.notify(i),!0)}catch(t){return console.error(t),t}}applyCSS(t,e){this.proto.self instanceof l||this.error("I am not RealElement !");var r=t;if("string"!=typeof t){for(;(r=r?.parentElement)&&r!==this.proto.self;);r?t=" #"+(t.id||(t.id=R.getRandomId())):this.error('"selfSelector" must be String or my descendant !')}var i=this.proto.self.id||(this.proto.self.id=R.getRandomId());return!!(e="string"==typeof e?R.myStyle.get(e):Object(e))&&(R.addCSSRules("#"+i+(/^[A-Za-z]/.test(t)?" ":"")+t,e),R.addId(i,!1),!0)}clone(t,e,r){var i={self:this.proto.self instanceof l?this.proto.self.cloneNode():Object.assign(Object.create(Reflect.getPrototypeOf(this.proto.self)),this.proto.self),key:this.key,transform:this.transform},i=new S(i,{get:this.proto.get,set:this.proto.set,react:this.proto.react,id:this.id.description+"-clone",info:this.info,initValue:t?this.proto.value:void 0});return Reflect.setPrototypeOf(i,Reflect.getPrototypeOf(this)),null==r&&(i.relativeRNs=r?this.relativeRNs:this.relativeRNs.concat()),e?i.fix():i}get isElement(){return this.proto.isElement}get transform(){return this.proto.transform}set transform(t){this.proto.transform="function"==typeof t?t:this.protoTransform}get self(){return this.proto.self}set self(t){Object(t)===t?this.proto.isElement=(this.proto.self=t)instanceof l:this.error('=> "self" must be Object !')}constructor({self:t,key:e,transform:r},i,s,...o){super(i,s),this.proto,this.self=t,this.key=e,this.transform=r,s&&this.realSet(i.initValue),this.relate(...o),this.addClassName(this.constructor.name)}},R=class R extends S{get self(){return this.proto.self}set self(t){Object(t)===t?this.proto.isElement=(this.proto.self=t)instanceof l:this.error('=> "self" must be Element !')}static idSet=new Set;static findId(t){return this.idSet.has(t)}static deleteId(t){return"string"!=typeof t&&console.error('=> Please use String "id" !'),this.idSet.delete(t)}static getRandomId(){for(var t;this.idSet.has(t="C3"+Math.floor(1e14*Math.random()).toString(36)););return t}static addId(t,e=!0){t&&("string"!=typeof t?this.error('=> Please use String "id" !'):this.idSet.has(t)?e&&this.error('=> Please use another "id" !'):this.idSet.add(t))}static myStyle=new Map;static selectorEventListeners={};static keyboardController=(d&&addEventListener("keydown",t=>{if(!/^(TEXTAREA)|(SELECT)|(INPUT)$/.test(document.activeElement?.tagName)){var e,r,i=document.querySelector(".onkeyboardControl")??document.querySelector(".keyboardController");if(i){switch(t.key){case R.keyboardController?.previous:e=-1;break;case R.keyboardController?.next:e=1;break;case R.keyboardController?.enter:(r=S.searchByObj(i)[0])instanceof C?r.proto.list.length?(i.classList.remove("onkeyboardControl"),(r=r.proto.list[0]).classList.add("onkeyboardControl")):(r=i).click():(r=i.querySelector(".keyboardController"))?(i.classList.remove("onkeyboardControl"),r.classList.add("onkeyboardControl")):(r=i).click();break;case R.keyboardController?.back:for(r=i;(r=r.parentElement)&&!r.classList.contains("keyboardController"););(r?(i.classList.remove("onkeyboardControl"),r):r=i).classList.add("onkeyboardControl")}if(e++)if((r=i).classList.remove("onkeyboardControl"),e){for(;(r=r.nextElementSibling)&&"none"===getComputedStyle(r).display;);(r=r||i.parentElement.firstElementChild).classList.add("onkeyboardControl")}else{for(;(r=r.previousElementSibling)&&"none"===getComputedStyle(r).display;);(r=r||i.parentElement.lastElementChild).classList.add("onkeyboardControl")}r&&r.animate({opacity:[1,0,1]},{duration:500})}}}),{previous:"ArrowUp",next:"ArrowDown",enter:"ArrowRight",back:"ArrowLeft"});static makeElementByString=(()=>{let e=d?document.createElement("template"):{content:{}};function t(t){return e.innerHTML=String(t),e.content.firstElementChild}return t._clear=()=>(e.innerHTML="",e.content),t})();static createImg(){return new R({self:document.createElement("img"),key:"src"})}static createVideo(){return new R({self:document.createElement("video"),key:"src"})}static createAudio(){return new R({self:document.createElement("audio"),key:"src"})}static createDiv(t,e=""){return new R({self:document.createElement("div"),key:"textContent"},{id:t,initValue:e})}static createTextarea(t){return new R({self:R.makeElement("textarea",{placeholder:String(t)}),key:"value"})}static makeElement(t,e,r){return t instanceof l||(t=document.createElement(t)),Object.assign(Object.assign(t,e).style,r),t}static applyKeyboardController(){for(var t of arguments)t instanceof l?t.classList.add("keyboardController"):t?.self instanceof l&&t.self.classList.add("keyboardController")}static cancelKeyboardController(){for(var t of arguments)t instanceof l?t.classList.remove("keyboardController"):t?.self instanceof l&&t.self.classList.remove("keyboardController")}static addEventListenerBySelectors=(t,r,e)=>{let i=r.replace(r[0],r[0].toUpperCase());t&&"*"!==t?(R.selectorEventListeners[r]||(R.selectorEventListeners[r]=new Map,addEventListener(r,t=>{var e=s.now();R.selectorEventListeners[r].forEach(function(t,e,r){try{if(Array.from(document.querySelectorAll(r)).includes(t.target))for(var i=0,s=e.length;i<s;)try{e[i++](t)}catch(t){console.error,alert(t?.stack??t)}}catch(t){console.error(t)}}.bind(null,t)),p(i+"-listeners completed\nin "+b.makeNumStr0oTail(s.now()-e)+" ms.")})),R.selectorEventListeners[r].has(t)?R.selectorEventListeners[r].get(t).push(e):R.selectorEventListeners[r].set(t,[e])):addEventListener(r,e)};static addCSSRules=(()=>{if(!d){let t=()=>t;return t._css=m.onload,t}var r=m.onload.then(function(){document.getElementsByTagName("head")[0].appendChild(document.createElement("style"))[!window.createPopup&&"appendChild"]?.(document.createTextNode("")),r=document.styleSheets[document.styleSheets.length-1]});let a=/^\.([A-Za-z][A-Z0-9a-z]{0,})$/,l=/[A-Za-z]$/,h=/^[A-Za-z]/,c=t=>Object(t)===t?Object.keys(t):[];var i=globalThis.CSSStyleSheet.prototype.insertRule?(t,e)=>r.insertRule(t+"{\n"+e+"}",r.cssRules.length):(t,e)=>r.addRule(t,e,-1),f=(t,e)=>r instanceof Promise?r.then(()=>(f=i)(t,e)):(f=i)(t,e);function u(e,r){try{if(Array.isArray(e)){let t=e.length;for(;0<t--;)"string"==typeof e[t]&&u(e[t],r);return u}"string"!=typeof e&&R.error('"prefix" in addCSSRules must be String !');for(var t of c(r)){var i,s=r[t],o=[];for(i of c(s))o.push(i,":",String(s[i]),";\n");f(e+(l.test(e)&&h.test(t)?" ":"")+t+" ",o.join(""))}var n=a.exec(e)?.[1];n&&R.myStyle.set(n,Object.assign({},R.myStyle.get(n),r))}catch(t){console.error(t)}return u}return u._css=r,u})();static defaultInit=(v=!1,()=>v?m.onload:m.onload=(v=!0,m.onload.then(()=>b.time(()=>{R.addCSSRules("",{"*":{margin:"0",padding:"0",border:"0","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"},":root":{"--mapWidth":"1920px","--halfBlack":"rgba(0, 0, 0, 0.5)","--halfWhite":"rgba(225, 225, 225, 0.5)","--noColor":"rgba(0, 0, 0, 0)"},pre:{"text-align":"left","align-content":"left","vertical-align":"top","white-space":"pre-wrap","word-wrap":"break-word"},html:{cursor:"default","background-color":"black",color:"white"},body:{transform:"rotate(0)","transform-origin":"50vmin 50vmin",overflow:"visible scroll"},"body>*":{position:"absolute"},hr:{border:"1px solid white,"},"::-webkit-scrollbar":{display:"none"}})(".coverBody",{"":{width:"100vmax",height:"56.25vmax"}})(".noDisplay",{"":{display:"none"}})(".disappear",{"":{visibility:"hidden"}})(".listDown",{"":{"writing-mode":"horizontal-tb"},">*":{position:"relative",display:"block"}})(".listRight",{"":{"writing-mode":"vertical-lr"},">*":{position:"relative",display:"block"}})(".listDownListRight",{"":{"writing-mode":"horizontal-tb"},">*":{position:"relative",display:"block","writing-mode":"vertical-lr"},">*>*":{position:"relative",display:"block"}})(".listRightListDown",{"":{"writing-mode":"vertical-lr"},">*":{position:"relative",display:"block","writing-mode":"horizontal-tb"},">*>*":{position:"relative",display:"block"}})("div.listClose",{"":{"writing-mode":"horizontal-tb"},">*":{position:"absolute"},">:nth-child(1)":{"z-index":"1"},">:nth-child(2)":{"z-index":"2"},">:nth-child(3)":{"z-index":"3"},">:nth-child(4)":{"z-index":"4"},">:nth-child(5)":{"z-index":"5"},">:nth-child(6)":{"z-index":"6"},">:nth-child(7)":{"z-index":"7"},">:nth-child(8)":{"z-index":"8"},">:nth-child(9)":{"z-index":"9"},">:nth-child(10)":{"z-index":"10"},">:nth-child(11)":{"z-index":"11"},">:nth-child(12)":{"z-index":"12"},">:nth-child(13)":{"z-index":"13"},">:nth-child(14)":{"z-index":"14"},">:nth-child(15)":{"z-index":"15"}})("div.listFar",{"":{"writing-mode":"horizontal-tb"},">*":{position:"absolute"},">:nth-last-child(1)":{"z-index":"1"},">:nth-last-child(2)":{"z-index":"2"},">:nth-last-child(3)":{"z-index":"3"},">:nth-last-child(4)":{"z-index":"4"},">:nth-last-child(5)":{"z-index":"5"},">:nth-last-child(6)":{"z-index":"6"},">:nth-last-child(7)":{"z-index":"7"},">:nth-last-child(8)":{"z-index":"8"},">:nth-last-child(9)":{"z-index":"9"},">:nth-last-child(10)":{"z-index":"10"},">:nth-last-child(11)":{"z-index":"11"},">:nth-last-child(12)":{"z-index":"12"},">:nth-last-child(13)":{"z-index":"13"},">:nth-last-child(14)":{"z-index":"14"},">:nth-last-child(15)":{"z-index":"15"}})(".onhover",{":hover":{background:"linear-gradient(#fff,#000,#000,#fff)"}})(".onactive",{":active":{background:"linear-gradient(#000,#fff,#fff,#000)"}})(".childOnhover",{">:hover":{background:"linear-gradient(#fff,#000,#000,#fff)"}})(".childOnactive",{">:active":{background:"linear-gradient(#000,#fff,#fff,#000)"}})(".relativeSquare",{"":{width:"20vmin",height:"20vmin"}})(".fontTitle",{"":{"font-size":"20vmin"}})(".fontHead",{"":{"font-size":"10vmin"}})(".fontNormal",{"":{"font-size":"3vmin"}})(".scrollY",{"":{overflow:"hidden scroll"}})(".scrollX",{"":{overflow:"scroll hidden"}})(".scrollXY",{"":{overflow:"scroll"}})(".scrollNone",{"":{overflow:"hidden"}})(".centerCenter",{"":{"text-align":"justify","align-items":"center","align-content":"center","vertical-align":"baseline","justify-content":"center"}})(".autoFull",{"":{width:"100vmax",height:"100vmin"}})(".selfCenterCenter",{"":{left:"50%",top:"50%",transform:"translate(-50%,-50%)"}})._css.finally()},t=>p("Init defaultCSS\nin "+b.makeNumStr0oTail(t)+" ms.")))))};{let e=function(){if(!new.target)return new e;this.resolve=null,this.reject=null,this.promise=new Promise(function(t,e){this.resolve=t,this.reject=e}.bind(this))};var x=new class x{newPage(){return new x(this)}newPrivatePage(e){return new Promise(t=>t(e?.(this.newPage())))}then(t){return"function"==typeof t&&this.fnList.unshift(t),this}getNextPage(){var t;if(this.ofStory instanceof x)return(t=this.ofStory.pages)[t.indexOf(this)+1]}getPreviousPage(){var t;if(this.ofStory instanceof x)return(t=this.ofStory.pages)[t.indexOf(this)-1]}newPromiseObj(){let t=new e;return this.then(()=>t.promise),t}async launch(){for(var e=0,t=this;(t=t.ofStory)instanceof x;)e++;for(e||(r=!0);this.pages.length||this.fnList.length;){for(;this.fnList.length;)try{this.info=await this.fnList.pop()?.(this.info)}catch(t){console.error("Depth of the fn : "+e+"\n"+String(t?.stack??t))}try{await this.pages.shift()?.launch?.()}catch(t){console.error("Depth of the page : "+e+"\n"+String(t?.stack??t))}}e||(r=!1)}get StoryPromise(){return e}get index(){return this.ofStory instanceof x?this.ofStory.pages.indexOf(this):-1}ofStory;pages=[];fnList=[];info;constructor(t){(this.ofStory=t instanceof x&&t)&&t.pages.push(this)}};let r=!1;Reflect.getPrototypeOf(x).constructor=i(()=>r||x.launch(),50)}var N,E,L,k,C,O,A,P,j,B,M=new class M{newOne(t){return new M(t)}catch(t){return this.self=Promise.resolve(this.self).catch(t),this}finally(t){return this.self=Promise.resolve(this.self).finally(t),this}_push(t){return this.list.push(t),t}_throw(t){throw this.list.push(t),t}then(t,e){return this.self=Promise.resolve(this.self).then(t,e).then(this._push,this._throw),this}async tryHandler(t,e){if("function"!=typeof t)throw new TypeError('"handler" must be Function !');try{await this.self}catch(t){console.error(this.length,t)}for(var r=this.length;0<r--;)try{try{return t(await this.list[r])}catch(t){(e??console.error)(t)}}catch(t){console.error(t)}}get require(){return M.require}static require=(()=>{let i={},s=/[^\/]+\/\.\.\//g;return h?function(t){return this instanceof M&&this._push(Promise.resolve(r(String(t))))}:d?function(t){var e,r;if(t=String(t).replaceAll("\\","/"),!(this instanceof M))return Promise.reject();for(;s.test(t);)t=t.replaceAll(s,"");return i[t]||(i[t]=(e=x.StoryPromise(),document.head.appendChild(r=R.makeElement("script",{onload:e.resolve,onerror:e.reject,src:t})),this._push(e.promise.finally(function(){this.remove()}.bind(r)))))}:function(){return Promise.reject(new Error("Mode error !"))}})();get length(){return this.list.length}list=[];constructor(t){Reflect.defineProperty(this,"list",a),Reflect.defineProperty(this,"_push",{value:this._push.bind(this),enumerable:!1,writable:!1}),Reflect.defineProperty(this,"_throw",{value:this._throw.bind(this),enumerable:!1,writable:!1}),this.self=Promise.resolve(t).then(this._push,this._throw)}}(m.onload);return M.self.finally(()=>b.time(m.onload,t=>p("Set up\nin "+b.makeNumStr0oTail(t)+" ms."))),d?(N=class N extends R{static proto=class extends S.proto{temp=document.createElement("canvas").getContext("2d");backup=document.createElement("canvas").getContext("2d");img=new Image;isElement=!0;clearBeforeDraw=!0;ctx};static useCache=!0;static srcImageMap=new Map;static strN(t,e){return String(t).padStart(e,"0")}static preloadSrc(){for(var t=w.tempProxy.arr.concat(...arguments),e=t.length;0<e--;)t[e]=N.getImageBySrc(t[e]);return Promise.allSettled(t)}static getImageBySrc=(()=>{function e(t,e,r){let i=N.srcImageMap.get(t)??new Image;i.src?e(i):!t||"string"!=typeof t||N.useCache&&N.srcImageMap.has(t)?r():Object.assign(i,{onload:()=>(N.srcImageMap.set(t,i),i.onload=i.onerror=e(i)),onerror:r,src:t})}return t=>new Promise(e.bind(null,t))})();static getRealGroupToClear=(()=>{class n{x=0;y=0;radiusX;radiusY;shape;relative}return function(t,{initFn:e,fnBeforeClear:r,fnAfterClear:i}={}){if(!(t instanceof N))throw new Error('=> "realCanvas" must be instanceof RealCanvas !');"function"==typeof i&&(i=i.bind(t)),"function"==typeof r&&(r=r.bind(t));let s=new n,o=new w({self:s});return o.addSetterListener(null,async()=>{await Promise.resolve(t.loaded).then(r),await t.clearShape(s,s.shape).then(i)}),t.loaded.finally(e),o}})();protoTransform(){}protoGet(){return this.loaded.then(()=>this.proto.value)}clearAsync(){return this.loaded=Promise.resolve(this.loaded).then(()=>this.clear())}fix(t=this.proto.temp.canvas){(this.proto.clearBeforeDraw?this.clear():this.proto.ctx).drawImage(t,0,0)}preloadSrc(){return this.loaded=Promise.resolve(this.loaded).then(o.bind(null,N.preloadSrc.apply(null,arguments)))}clear(){return this.proto.ctx.clearRect(0,0,this.proto.self.width,this.proto.self.height),this.proto.ctx.closePath(),this.proto.ctx}clearTemp(){return this.proto.temp.clearRect(0,0,this.proto.self.width,this.proto.self.height),this.proto.temp.closePath(),this.proto.temp}testSrc(t){return this.loaded=Promise.resolve(this.loaded).then(()=>N.getImageBySrc(t)).then(()=>!0,this.rejectSrc.bind(this,t))}rejectSrc(t,e){return t&&console.error(e instanceof Error?e:(N.useCache&&e&&N.srcImageMap.set(t),this+': Fail to load by src "'+t+'" !')),!1}protoSet(e){return this.loaded=Promise.resolve(this.loaded).then(()=>N.getImageBySrc(e)).then(t=>(this.proto.img=t,this.proto.value=e,!0),this.rejectSrc.bind(this,e))}toBlob(){try{return m.cb2promise({thisArg:this.self,useFn:"toBlob"}).then(t=>t[0]instanceof Error?(console.error(t[0]),new Blob):t[0])}catch(t){return console.error(t),Promise.resolve(new Blob)}}resizeBySrc(t){return this.loaded=Promise.resolve(this.loaded).then(()=>N.getImageBySrc(t)).then(t=>{this.self.width!==t.naturalWidth&&(this.width=t.naturalWidth),this.self.height!==t.naturalHeight&&(this.height=t.naturalHeight)})}realSet(t,e,r,i){var s;return this.loaded=Array.isArray(t)?this.multiDrawSrcArray({},...t).then(()=>{this.proto.value=t}):Promise.resolve(this.proto.set.call(this,this.proto.tryRealNode&&(s=this._computePositionsOfRNs(t)).length?this._dealWithPositionsOfRNs(s,t):t)??!0).then(t=>t&&(this.fix(this.img),e&&this.react?.(),r&&this.notify(i),!0)).catch(t=>(console.error(t),t))}multiDrawSrcArray({bgSrc:t,autoOpacity:e,resize:r},...i){this.preloadSrc(t,i);var s=-1,o=t??i[0]??!1;if(r&&o&&this.resizeBySrc(o),this.loaded=Promise.resolve(this.loaded).then(()=>this.clearTemp()),Array.isArray(t))for(o=t.length;o>++s;)this.temp=t[s];else t&&"string"==typeof t&&(this.temp=t);if(1<i.length&&e)for(s=i.length,o=0;0<s--;)this.tempOpacity=.625**s,this.temp=i[o++];else for(s=-1,o=i.length;o>++s;)this.temp=i[s];return this.loaded=Promise.resolve(this.loaded).then(()=>{this.fix(this.proto.temp.canvas)},t=>p(t?.stack??t))}applyMouseClear({radiusX:e,radiusY:r,relative:i}={},s){let o=this.proto.self,t=this.proto.backup,n=getComputedStyle(o),a=()=>(t.canvas.width=o.width,t.canvas.height=o.height,t.drawImage(o,0,0)),l=t=>(h(),this.clearShape({x:t.offsetX*o.width/+n.width.slice(0,-2),y:t.offsetY*o.height/+n.height.slice(0,-2),radiusX:e,radiusY:r,relative:i},s)),h=()=>this.clear().drawImage(t.canvas,0,0);return o.addEventListener("mouseenter",a),o.addEventListener("mouseleave",h),o.addEventListener("mousemove",l),()=>(o.removeEventListener("mouseenter",a),o.removeEventListener("mouseleave",h),o.removeEventListener("mousemove",l))}clearShape({x:n=0,y:a=0,radiusX:l,radiusY:h,relative:c}={},f){var t=!1;return"number"==typeof l?"number"!=typeof h&&(h=l):"number"==typeof h?l=h:t=!0,(t=t||!Number.isFinite(l+h))?Promise.reject(new Error('"radiusX": '+String(l)+' or "radiusY": '+String(h)+" must be legal number !")):("number"!=typeof n&&(n=0),"number"!=typeof a&&(a=0),(t=t||!Number.isFinite(n+a))?Promise.reject(new Error('"x": '+String(n)+' or "y": '+String(a)+" must be legal number !")):this.loaded=Promise.resolve(this.loaded).then(()=>{var t,e=this.proto.self,r=this.proto.temp,i=0;if(l=Math.abs(c?l*this.width/2:l),h=Math.abs(c?h*this.height/2:h),r.canvas.width=e.width,r.canvas.height=e.height,r.drawImage(e,0,0),"rect"!==f){n=Math.round(n),a=Math.round(a),l=Math.ceil(l);for(var s=(h=Math.ceil(h))**2,o=s/l**2;i++<l;)t=Math.floor(Math.sqrt(s-i**2*o))+1,r.clearRect(n-i,a-t,2*i,2*t)}else r.clearRect(Math.floor(n-l),Math.floor(a-h),Math.ceil(2*l),Math.ceil(2*h)),this.clear().drawImage(r.canvas,0,0);this.clear().drawImage(r.canvas,0,0)}).catch(t=>console.error(t)))}animate({prefix:r,suffix:i,startN:s=0,length:o,midLength:n,bgSrc:a,playMode:l=0,timeSep:h=100,sizeMode:c="std",resizeAfter:f=!0}={}){let u={width:this.width,height:this.height},t=[];var d=s+o+l;for(o*="1235"[l]||1,h/="1235"[l]||1;d-- >s;)t.push(r+N.strN(d,n)+i);return this.preloadSrc(t),d=0,{loaded:this.loaded,finished:this.loaded.then(()=>{var t;let e=new m(h);switch("auto"===c&&(t=!0),l){default:for(;0<o--;)e.then(this.multiDrawSrcArray,this,{bgSrc:a,resize:t},r+N.strN(s++,n)+i);case 1:for(;0<o--;)e.then(this.multiDrawSrcArray,this,{bgSrc:a,autoOpacity:!0,resize:t},(d=!d)||r+N.strN(s++,n)+i,!1,r+N.strN(s,n)+i);break;case 2:for(;0<o--;)e.then(this.multiDrawSrcArray,this,{bgSrc:a,autoOpacity:!0,resize:t},1===d?r+N.strN(s+1,n)+i:2===d&&r+N.strN(s,n)+i,!1,d<2?r+N.strN(s,n)+i:r+N.strN(s+1,n)+i),3==++d&&(s++,d%=3);break;case 3:for(;0<o--;)e.then(this.multiDrawSrcArray,this,{bgSrc:a,autoOpacity:!0,resize:t},1===d?r+N.strN(s+1,n)+i:4===d&&r+N.strN(s,n)+i,!1,2===d?r+N.strN(s+1,n)+i:3===d&&r+N.strN(s,n)+i,!1,d<3?r+N.strN(s,n)+i:2<d&&r+N.strN(s+1,n)+i),5==++d&&(s++,d%=5)}return e.then(()=>(this.clearTemp(),f&&Object.assign(this,u),e.destroy()))})}}get ctx(){return this.proto.ctx}get img(){return this.proto.img}get imgW(){return this.proto.img.naturalWidth}get imgH(){return this.proto.img.naturalHeight}get width(){return this.proto.self.width}set width(t){this.proto.self.width=this.proto.temp.canvas.width=t??640}get height(){return this.proto.self.height}set height(t){this.proto.self.height=this.proto.temp.canvas.height=t??360}get self(){return this.proto.self}set self(t){t instanceof HTMLCanvasElement&&(this.proto.ctx=(this.proto.self=t).getContext("2d"))}get clearBeforeDraw(){return this.loaded.then(()=>this.proto.clearBeforeDraw)}set clearBeforeDraw(t){this.loaded=Promise.resolve(this.loaded).then(()=>this.proto.clearBeforeDraw=t)}get temp(){return this.proto.temp.canvas}set temp(t){return this.proto.set.call(this,t).then(()=>(this.proto.temp.drawImage(this.img,0,0),!0),this.rejectSrc.bind(this,t))}get opacity(){return this.loaded.then(()=>this.proto.ctx.globalAlpha)}set opacity(e){Array.isArray(e)||(e=[e]),this.loaded=Promise.resolve(this.loaded).then(()=>e[0]).then(t=>{this.proto.ctx.globalAlpha=t*(e[1]??1)})}set tempOpacity(e){Array.isArray(e)||(e=[e]),this.loaded=Promise.resolve(this.loaded).then(()=>e[0]).then(t=>{this.proto.temp.globalAlpha=t*(e[1]??1)})}loaded=b.now;constructor(t,e,r,i,...s){var o="string"==typeof t?document.getElementById(t):(t="",!1);o&&"canvas"!==o.tagName.toLocaleLowerCase()&&b.error('=> "id" exists but not within an HTMLCanvasElement !'),R.addId(t,!o),super({self:o||R.makeElement("canvas",{id:t})},{id:t},i,...s),this.proto,this.width=e,this.height=r,this.proto.ctx=this.proto.self.getContext("2d")}},E=class E extends R{static proto=class extends S.proto{onerror;onloadend};static fs=(()=>{let e={method:"HEAD"},r=t=>[,t],i=t=>[t];class u{get stat(){return u.stat}get readdir(){return u.readdir}}return u.fetch=(()=>{let r=t=>t.status<300?t:E.error("Failed request !");return d&&"file:"===document.location.protocol?(t,e)=>fetch(t,((e=Object.assign({},e)).mode="no-cors",e)).then(r):(t,e)=>fetch(t,Object(e)).then(r)})(),u.stat=h?async t=>m.cb2promise({thisArg:await c,useFn:"stat"},t):t=>u.fetch(t,e).then(r,i),u.readdir=h?async t=>m.cb2promise({thisArg:await c,useFn:"readdir"},t):async(t,...e)=>{try{var r,i=e.length,s=i;for(/\/$/.test(t)||(t+="/");0<s--;)if(Array.isArray(e[s]))for(r=e[s].length;0<r--;)e[s][r]=String(e[s][r]);else{var o=String(e[s]);if("\\"===o[0])switch(o[1]){case"w":e[s]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";break;case"d":e[s]="0123456789"}else e[s]=[o]}for(var n=[],a=[],l=[],h=Array(i).fill(0);!("-1"in h);){for(r="",s=0;s<i;s++)r+=e[s][h[s]];for(a.push(r),r=t+r,n.push(u.stat(r)),h[(s=i)-1]++;0<s--;)e[s].length>h[s]||(h[s]=0,h[s-1]++)}for(var c=await Promise.all(n),f=c.length,s=0;s<f;s++)c[s][0]??p(l.push(a[s]),a[s]);return[null,l]}catch(t){return[t,[]]}},new u})();static _configDescriptor=(d&&addEventListener("click",async t=>{if(t.target.classList.contains("RealLoader"))for(var e of S.searchByObj(t.target))if(e instanceof E){try{var r=(await E.load(e))[0];r?e.onerror?.(r):e.onloadend?.()}catch(t){console.error(t)}e.notify(!0),e.react?.();break}}),{writable:!1,enumerable:!1,configurable:!1});static getArrayBufferFrom(t){return Promise.resolve(t instanceof ArrayBuffer?t:ArrayBuffer.isView(t)?t.buffer:(t instanceof Blob?t:new Blob(Array.isArray(t)?t.join(""):String(t))).arrayBuffer())}static load=h?async e=>{try{if("upload"===e.type){let t=e.temp.files;return e.temp.click(),await m.onceIf(()=>t!==e.temp.files,10),[]}let r=await c;var t=await e.dataGetter(),{1:i="file",2:s=""}=/(.+)(\..+)/.exec(e.temp.download)||[],o=await m.cb2promise({thisArg:r,useFn:"stat"},"./"+e.temp.download);if(o||this.error("Unknown Error !"),o[0])return E.getArrayBufferFrom(t).then(t=>m.cb2promise({thisArg:r,useFn:"writeFile"},"./"+e.temp.download,Buffer.from(t)));for(var n=1;;n++){1;{let e="./"+i+" - "+n+s;if((await m.cb2promise({thisArg:r,useFn:"stat"},e))[0])return E.getArrayBufferFrom(t).then(t=>m.cb2promise({thisArg:r,useFn:"writeFile"},e,Buffer.from(t)))}}}catch(t){return[t]}}:(()=>{let i=t=>new Blob(t);return async e=>{try{if("upload"===e.type){let t=e.temp.files;e.temp.click(),await m.onceIf(()=>t!==e.temp.files,10)}else{var t=await e.dataGetter(),r=URL.createObjectURL(await("string"==typeof t?new Blob([t]):t instanceof Blob?t:E.getArrayBufferFrom(t).then(i)));e.temp.href=r,e.temp.click(),URL.revokeObjectURL(r)}return[]}catch(t){return[t]}}})();load(){return E.load(this)}protoSet(t){return this.self[this.key]=String(t),!1}get files(){return"upload"===this.type?this.temp.files:this.error("I'm an downloader without files !")}get onerror(){return this.proto.onerror}set onerror(t){this.proto.onerror="function"==typeof t?t:null}get onloadend(){return this.proto.onloadend}set onloadend(t){this.proto.onloadend="function"==typeof t?t:null}get fileName(){return"upload"===this.type?this.error('Uploader bans "fileName" !'):this.temp.download}set fileName(t){"upload"===this.type&&this.error('Uploader bans "fileName" !'),"symbol"==typeof t&&this.error('"fileName" must be String but not Symbol !'),h&&!/^\.\//.test(t)&&(t="./"+t),this.temp.download=t}dataGetter;constructor(t,e,r,{innerHTML:i,onerror:s,onloadend:o}={}){super({self:document.createElement("div"),key:"innerHTML"}),this.proto,this.onerror=s,this.onloadend=o,this.dataGetter=r,this.value=i,t=Boolean(t),this.temp=document.createElement(t?"a":"input"),Reflect.defineProperty(this,"temp",E._configDescriptor),this.type=t?(this.fileName=e||"file","download"):(this.temp.type="file","upload"),Reflect.defineProperty(this,"type",E._configDescriptor)}},L=class L extends R{static proto=class extends S.proto{list=[]};static _react(t,e=!0,r=!0,i=!0){try{for(var s,o,n=this._getPositionsOfChildRN(t);n.length;){var a=n.pop().reverse(),l=t.value;if(!a.length)return this.realSet(l,e,r,i);for(s=this.proto.value;1<a.length;)s=s[a.pop()];if(l!==s[a[0]]&&(s[a[0]]=l),s===this.proto.value){o=0;for(var h of Object.keys(s)){if(h===a[0]){this.proto.list[o].value=String(l);break}o++}}}return e&&this.react?.(i),r&&this.notify(i),!0}catch(t){if(this instanceof L)throw t;this.error('Please avoid using method "react" of typeof '+this?.name+" !\n"+t.message)}}protoSet(t){return this.proto.value=Object.assign({},t),!0}fix(){return this.self[this.key]=this.protoTransform(this.proto.value),this.proto.list=Array.from(this.self.children),this}getValueIndexs(){for(var t=this.proto.list.length,e=[];0<t--;)this.proto.list[t].selected&&e.push(t);return e.reverse()}protoGet(){for(var t=[],e=this.proto.list,r=e.length,i=0;i<r;i++)e[i].selected&&t.push(e[i].value);return t}protoTransform(t,e=String(this.defaultKey),r=String(this.defaultValue)){this instanceof L&&!this.self.multiple&&(t=Object.assign({[e]:r},t));for(var i,s=[],o=Object.entries(t).sort((t,e)=>t[0].localeCompare(e[0])).sort((t,e)=>t[0]-e[0]).values();!(i=o.next()).done;)s.push(`<option value="${String(i.value[1])}" ${i.value[0]===e?"selected":""}>${i.value[0]}</option>`);return s.join("")}get list(){return this.proto.list}constructor(t,e,r,i,s,o,n){var a="string"==typeof t?document.getElementById(t):(t="",!1);a&&("select"===a.tagName.toLocaleLowerCase()?Object.assign(a,{multiple:e,onchange:n}):b.error('=> "id" exists but not within an HTMLSelectElement !')),R.addId(t,!a),super({key:"innerHTML",self:a||R.makeElement("select",{id:t,multiple:e,onchange:n})},{id:t,initValue:Object.assign({},r)},i),this.proto,this.defaultKey=s??"_",this.defaultValue=o??"",this.fix()}},k=class k extends R{static comtagClassMap=new Map;static defineComtagClass(t,e,r,i,s,o){/^([A-Za-z]\w*)$/.test(t)||this.error('Illegal "className" !'),this.comtagClassMap.has(t)&&this.error('"className" repeated !'),r?.[Symbol.iterator]||this.error('"optionList" must be Array !'),this.addCSSRules("."+t,s),this.comtagClassMap.set(t,[e,r,i,"function"==typeof o?o:null])}static createByClassName(t,...e){var r=this.comtagClassMap.get(t),i=(r||this.error('"className" not found !'),new k("",r[0],r[1],r[2]));return r[3].apply(i,e),i.addClassName(t),i}fix(){for(var t=this.transform(this.proto.value),e=t.length,r=0,i=R.makeElementByString._clear();r<e;)i.appendChild(t[r++]);return this.self.innerHTML="",this.self.appendChild(i),this}protoTransform(t){if(t?.[Symbol.iterator]){var e,r=[];for(e of t)r.push(e instanceof l?e:document.createElement(String(e)));return r}throw new Error('=> "value" must be Arraylike !')}protoSet(t){if(t?.[Symbol.iterator]){for(var e=this.proto.value[Symbol.iterator](),r=t[Symbol.iterator](),i=Array(2);i[0]=e.next(),i[1]=r.next(),!i[0].done^i[1].done&&!i[0].done;)if(i[0].value!==i[1].value)return this.proto.value=Array.from(t),!0;return!1}throw new Error('=> "value" must be Arraylike !')}constructor(t,e,r,i,s){var o="string"==typeof t?document.getElementById(t):(t="",!1);R.addId(t,!o),super({self:o||R.makeElement("div",{id:t})},{id:t,initValue:r?.[Symbol.iterator]?Array.from(r):[]},i),this.proto,this.tryHTML=e,Object.assign(this.fix().self,s)}},C=class C extends R{static proto=class extends S.proto{list=[];childrenList=[]};static divListClassMap=new Map;static createList(t=0,e,r,i){for(var s=[];0<t--;)s.push(document.createElement(e));return new C(r,!0,s,C.tryRealNode,i)}static _react(t,e=!0,r=!0,i=!0){try{for(var s,o=this._getPositionsOfChildRN(t);o.length;){var n=o.pop().reverse().concat(),a=t.value;if(!n.length)return this.realSet(a,e,r,i);for(s=this.proto.value;1<n.length;)s=s[n.pop()];a!==s[n[0]]&&(s[n[0]]=a),s===this.proto.value&&((n[1]=this.proto.list[n[0]]).innerHTML=""),a instanceof l?n[1].appendChild(a):this.tryHTML?n[1].innerHTML=a:n[1].textContent=a}return e&&this.react?.(i),r&&this.notify(i),!0}catch(t){if(this instanceof C)throw t;this.error('Please avoid using method "react" of typeof '+this?.name+" !\n"+t.message)}}static defineDivListClass(t,e,r,i,s,o){/^([A-Za-z]\w*)$/.test(t)||this.error('Illegal "className" !'),this.divListClassMap.has(t)&&this.error('"className" repeated !'),r?.[Symbol.iterator]||this.error('"optionList" must be Array !'),this.addCSSRules("."+t,s),this.divListClassMap.set(t,[e,r,i,"function"==typeof o?o:null])}static createByClassName(t,...e){var r=this.divListClassMap.get(t),i=(r||this.error('"className" not found !'),new C("",r[0],r[1],r[2]));return r[3].apply(i,e),i.addClassName(t),i}protoGet(){return this.proto.list}protoSet(t){return this.proto.value=Array.from(t),!0}protoTransform(t){var e,r,i=[];if(!t?.[Symbol.iterator])throw new Error('=> "value" must be Arraylike !');for(var s=t[Symbol.iterator]();!(e=s.next()).done;)i.push(r=document.createElement("div")),e.value instanceof l?r.appendChild(e.value):this.tryHTML?r.innerHTML=String(e.value):r.textContent=String(e.value);return i}getIdDict(t,e){var r,i=Object.create(null),s=this.proto.list.length;if(t)for(;0<s--;)1<(r=this.proto.childrenList[s]).length||!r[0]?.id||(i[r[0].id]=new R({self:this.proto.list[s],key:e}));else for(;0<s--;)1<(r=this.proto.childrenList[s]).length||!r[0]?.id||(i[r[0].id]=this.proto.list[s]);return i}getRealEmentList(){for(var t=this.proto.list.concat(),e=t.length;0<e--;)t[e]=new R({self:t[e]});return t}fix(){for(var t=0,e=this.proto.list=this.transform(this.proto.value),r=this.proto.childrenList=[],i=R.makeElementByString._clear();t<e.length;)r.push(Array.from(i.appendChild(e[t++]).children));return this.self.innerHTML="",this.self.appendChild(i),this}get childrenList(){return this.proto.childrenList}constructor(t,e,r,i,s){var o="string"==typeof t?document.getElementById(t):(t="",!1);R.addId(t,!o),super({self:o||R.makeElement("div",{id:t})},{id:t,initValue:r?.[Symbol.iterator]?Array.from(r):[]},i),this.proto,this.tryHTML=e,Object.assign(this.fix().self,s)}},O=class O extends C{static _react(t,e=!0,r=!0,i=!0){try{for(var s,o=this._getPositionsOfChildRN(t);o.length;){var n=o.pop().reverse(),a=t.value;if(!n.length)return this.realSet(a,e,r,i);for(s=this.proto.value;1<n.length;)s=s[n.pop()];a!==s[n[0]]&&(s[n[0]]=a),s===this.proto.value&&(this.proto.childrenList[n[0]][0].src=String(a?.src??a))}return e&&this.react?.(i),r&&this.notify(i),!0}catch(t){if(this instanceof O)throw t;this.error('Please avoid using method "react" of typeof '+this?.name+" !\n"+t.message)}}cloneImgList(){for(var t=this.childrenList.concat(),e=t.length;0<e--;)t[e]=t[e][0].cloneNode();return t}protoTransform(t){var e,r=[];if(!t?.[Symbol.iterator])throw new Error('=> "value" must be Arraylike !');for(var i=t[Symbol.iterator]();!(e=i.next()).done;)r.push(e.done=document.createElement("div")),e.done.appendChild(e.value instanceof Image?e.value:Object.assign(new Image,{src:String(e.value)}));return r}protoSet(t){if(t?.[Symbol.iterator]){for(var e=this.proto.value[Symbol.iterator](),r=t[Symbol.iterator](),i=Array(2);i[0]=e.next(),i[1]=r.next(),!i[0].done^i[1].done&&!i[0].done;)if((i[0].value?.src??String(i[0].value))!==(i[1].value?.src??String(i[1].value)))return this.proto.value=Array.from(t),!0;return!1}throw new Error('=> "value" must be Arraylike !')}constructor(t,e,r,i){super(t,!0,e,r,i)}},A=class A extends C{static proto=class extends C.proto{queueArray};static tempTarget=void(d&&(m.onload.then(()=>R.addCSSRules(".RealDivQueue",{">div:hover":{transform:"scale(1.1,1)"},">div:active":{transform:"scale(1.2,1)"}})),addEventListener("mousedown",t=>A.tempTarget=t.target),addEventListener("mouseup",t=>{for(var e,r,i=[r=A.tempTarget];r=r.parentElement;)i.push(r);for(var s=[r=t.target];r=r.parentElement;)s.push(r);if(i.pop()===s.pop()){for(r=[];(r[0]=i.pop())===(r[1]=s.pop());)if(!i.length)return;var[t,o]=r;if(t&&o){var n=t.parentElement;if(n.classList.contains("RealDivQueue")){for(e of S.searchByObj(n))if(e instanceof A)break;n=e.queueArray,n=(r[0]=n.indexOf(e.proto.list.indexOf(r[0])))>(r[1]=n.indexOf(e.proto.list.indexOf(r[1])))?n.slice(0,r[1]).concat(n[r[0]],n.slice(r[1],r[0]),n.slice(r[0]+1)):n.slice(0,r[0]).concat(n.slice(r[0]+1,r[1]+1),n[r[0]],n.slice(r[1]+1)),e.applyQueue(n,t,o)}}}})));getListQueue(){this.proto;for(var t=this.queueArray,e=t.length;0<e--;)t[e]=this.proto.list[t[e]];return t}fix(){for(var t=0,e=this.proto.list=this.transform(this.proto.value),r=this.proto.childrenList=[];t<e.length;)r.push(Array.from(e[t++].children));return this.applyQueue([])}applyQueue(t,e,r){for(var i=this.queueArray??[],s=Array.isArray(t),o=(t=s?t.slice(0,this.proto.list.length):i,this.proto.list.concat()),n=o.length,a=this.self.scrollTop,l=this.self.scrollLeft,h=n;0<h--;)null==t[h]&&(t[h]=h),-1===t.indexOf(h)&&this.error('Illegal "queueArray" !');if(-1!==(h=[i.indexOf(this.proto.list.indexOf(e)),i.indexOf(this.proto.list.indexOf(r))])[0]&&-1!==h[1])h[0]<h[1]?r.insertAdjacentElement("afterend",e):r.insertAdjacentElement("beforebegin",e);else{for(var h=0,c=R.makeElementByString._clear();h<n;)c.appendChild(o[t[h++]]);this.self.classList.add("disappear"),this.self.innerHTML="",this.self.appendChild(c),this.self.scrollTo({top:a,left:l,behavior:"instant"}),this.self.classList.remove("disappear")}return this.proto.queueArray=t,s&&(this.react?.(),this.notify(!0)),this}get queueArray(){return this.proto.queueArray?.concat?.()}},P=(t,e,r)=>C.createByClassName("realDivSelect",t,e,r),m.onload=m.onload.finally(()=>C.defineDivListClass("realDivSelect",!1,[],!0,{"":{background:"linear-gradient(135deg,#fff,#000)"},">div":{"background-color":"#333",transform:"scale(0.8,1)"},">div:hover":{transform:"scale(0.9,1)"},">.selected":{"background-color":"#555",transform:"scale(1)","font-weight":"bolder"}},(()=>{let e={bubbles:!0,cancelable:!1};function i(){for(var t=[],e=this.proto.list,r=0;e[r];r++)e[r].classList.contains("selected")&&t.push(this.info.optionList[r]);return this.info.multiple||t.length||!r||(e[0].classList.add("selected"),t.push(this.info.optionList[0])),t}function s(t){for(var e of(this.info.optionList=[],this.proto.value=Object.keys(t=Object(t)).sort().sort((t,e)=>t-e)))this.info.optionList.push(t[e]);return this.fix().value,!1}async function n(t){return t.react?.(),await t.notify(),t.self.dispatchEvent(new Event("change",e))}return addEventListener("click",t=>{var e=t.target.parentElement;if(e&&e.classList.contains("realDivSelect")){var r,i=0;for(o=S.searchByObj(e);(r=o.pop())&&!(r instanceof C););if(r){var e=r,s=e.value[0],o=e.proto.list;if(e.info.multiple)return t.target.classList.toggle("selected"),n(e);for(;r=o[i++];)t.target===r?r.classList.add("selected"):r.classList.remove("selected");s!==e.value[0]&&n(e)}}}),function(t,e,r){this.get=i,this.set=s,this.info=Object(this.info),this.info.multiple=Boolean(e),"function"==typeof r&&(this.self.onchange=r.bind(this)),this.value=t}})())),j=t=>C.createByClassName("realDivSearch",t),m.onload=m.onload.finally(()=>C.defineDivListClass("realDivSearch",!0,[],!0,{">:nth-child(2)>div>div:hover":{transform:"scale(0.9,1)"}},(()=>{var i;let e={bubbles:!0,cancelable:!1},r=Promise.resolve();function s(){return this.info.inputer.value}function o(t){return Array.isArray(t)?this.info.wordList=t:this.error('"value must be Array !'),r.then(()=>this.info.inputer.dispatchEvent(new Event("input",e))),!((i=i||this).info.matcher.value={})}return addEventListener("click",e=>b.afterNow(()=>{var t;t=e.target,i&&t!==i.info.inputer&&(i.info.matcher.value={},i.react?.(),i.notify(!0))})),R.addEventListenerBySelectors(".realDivSearch>:nth-child(1)>textarea","click",async t=>(await 0,t.target.dispatchEvent(new Event("input",e)))),R.addEventListenerBySelectors(".realDivSearch>:nth-child(1)>textarea","input",t=>{for(var r,e=S.searchByObj(t.target.parentElement.parentElement);(r=e.pop())&&!(r instanceof C););if(r){let e=new RegExp(r.info.inputer.value,"i");r.info.matcher.value=b.arrayToObject(r.info.wordList.filter(t=>e.test(String(t))))}}),R.addEventListenerBySelectors(".realDivSearch>:nth-child(2)>div>div","click",t=>{for(var e,r=S.searchByObj(t.target.parentElement.parentElement.parentElement);(e=r.pop())&&!(e instanceof C););e&&(e.info.inputer.value=e.info.matcher.value[0],(i=e).react?.(),i.notify(!0))}),function(t){var e=C.createByClassName("realDivSelect");this.proto.value=['<textarea placeholder="'+String(t)+'"></textarea>',e.self],this.fix().info=Object(this.info),this.info.inputer=this.proto.childrenList[0][0],this.info.matcher=e,this.info.wordList=[],this.get=s,this.set=o}})())),B=t=>C.createByClassName("realDivSeries",t),m.onload=m.onload.finally(()=>C.defineDivListClass("realDivSeries",!1,[],!0,{">div:nth-child(1)":{"font-weight":"bolder"},".hidden>div:nth-child(n + 2)":{display:"none"}},(()=>{function e(t){return("function"==typeof t?function(t,e){return this.protoTransform(r.concat(t(),e))}:t instanceof b?function(t,e){return this.protoTransform(r.concat(String(t.value),e))}:function(t,e){return this.protoTransform(r.concat(String(t),e))}).bind(this,t)}R.addEventListenerBySelectors(".realDivSeries>div:nth-child(1)","click",t=>{for(var e,r=R.searchByObj(t.target.parentElement);(e=r.pop())&&!(e instanceof C););e&&e.toggleClassName("hidden")});let r=[];return function(t){this.transform=e.call(this,t),this.fix()}})()))):p("No DOM !"),e.RealWorld=m,e.RealNode=b,e.RealGroup=w,e.RealTarget=S,e.RealStory=x,e.RealPromise=M,e.RealElement=R,e.RealCanvas=N,e.RealLoader=E,e.RealSelect=L,e.RealComtag=k,e.RealDivList=C,e.RealImgList=O,e.RealDivQueue=A,e.createRealDivSelect=P,e.createRealDivSearch=j,e.createRealDivSeries=B,p("Sync\nin "+b.makeNumStr0oTail(s.now()-t)+" ms."),e})();
//# sourceMappingURL=./real-node-esm.min.js.map