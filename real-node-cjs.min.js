try{let t=e=>e.default;var require=require??(e=>import(String(e)).then(t))}catch(e){console.error(e)}{var exports;let r=require,o=function(){},l=globalThis.Element??o,s=globalThis.performance??Date,i=globalThis.setInterval??o,t=globalThis.clearInterval??o,e=s.now(),a={writable:!1,enumerable:!1},h=console.log.bind(console),u="document"in globalThis,n="[object process]"===Object.prototype.toString.call(globalThis.process);globalThis.Number.prototype.toFloat=function(e){var t,r;return Number.isFinite(Number(this))?(e="number"!=typeof e?7:14<e?14:e<0?0:Math.floor(e),{0:t,1:r=""}=this.toString(16).split("."),BigInt("0x"+t)+"_+0x"+r.slice(0,e).padEnd(e,"0")):"NaN"},Reflect.defineProperty(globalThis.Number.prototype,"toFloat",a);{var RealWorld=function(e,...t){if(!new.target)return new RealWorld(e,...t);this.timeSep=Number.isFinite(Number(e))?Number(e):10,this._id=i(this._mainFn.bind(this),this.timeSep),this.fnList=t,this.info=void 0,this.self=u?document.createElement("div"):{},this.paused=!1,this.intervalFn=void 0,this.ifFn=void 0,this.soFn=void 0,Reflect.defineProperty(this,"_id",a),Reflect.defineProperty(this,"fnList",a),Reflect.defineProperty(this,"timeSep",a)};let e=function(...e){this.resolve(e)};RealWorld.onload=u?new Promise(t=>window.addEventListener("load",function e(){t(),window.removeEventListener("load",e)})):Promise.resolve(),RealWorld.getPromiseState=(()=>{let t=Symbol(),e=e=>Number(t!==e),r=()=>-1;return function(){return Promise.race([void 0,t]).then(e,r)}})(),RealWorld.onceIf=function(t,e){if("function"!=typeof t)return Promise.reject();let r=new RealWorld(e);return new Promise(e=>(r.ifFn=t,r.soFn=e)).then(()=>r.destroy())},RealWorld.cb2promise=function({thisArg:i,useFn:s,callback:t=e}={},...o){if("function"!=typeof(s="function"!=typeof s?i?.[s]:s))throw new Error('=> Wrong:\n\t"thisArg" is not Object\n or\n\t"useFn" not in "thisArg" !');return new Promise(e=>{let r={callback:t,resolve:e};try{s.call(i,...o,(...e)=>r.callback(...e))}catch(t){try{s.call(i,(...e)=>r.callback(...e),...o)}catch(e){r.resolve([new Error("=> Neither head or tail of parameters is Callback !\n"+t.stack+"\n"+e.stack)])}}}).catch(e=>console.error(e.stack))},RealWorld.prototype.destroy=function(){return t(this._id)},RealWorld.prototype.then=function(e){return"function"==typeof e&&this.fnList.unshift(e),this},RealWorld.prototype.getRealElement=function(){return new RealElement({self:this.self,key:"innerHTML"},{id:this.self.id,initValue:this.self.innerHTML})},RealWorld.prototype.setTimeSep=function(e){return(e=Number.isFinite(Number(e))?Number(e):10)!==this.timeSep&&(t(this._id),Reflect.defineProperty(this,"timeSep",{value:e}),Reflect.defineProperty(this,"_id",{value:i(this._mainFn.bind(this),this.timeSep)}))},RealWorld.prototype._mainFn=function(){if(!this.paused){try{this.intervalFn?.()}catch(e){this.intervalFn=console.error(e)}try{this.info=this.fnList.pop()?.call(this,this.info)}catch(e){console.error(e)}try{this.ifFn?.()&&(this.soFn?.(),this.ifFn=this.soFn=null)}catch(t){try{this.ifFn?.()}catch(e){t=e,this.ifFn=null,this.paused=!0}this.paused||(this.soFn=null),this.paused=!1,console.error(t)}}}}var RealNode=class RealNode{static error(e){throw new Error(this.name+" : "+e)}static _sys=new Map;static t0=Date.now();static tryRealNode=!1;static now=Promise.resolve();static eventLoop=new RealWorld(4);static proto=class{tryRealNode;childRNs=[];["get"];["set"];react;id;value};static search(e){return this._sys.get(e)}static is(e,t){return Object.is(e,t)||e===t}static justNow(e,t,...r){return RealNode.now.then(e.bind(t,...r))}static arrayToObject(){for(var e=Object.create(null),t=Array.from(arguments).flat(),r=t.length,i=0;i<r;i++)e[String(t[i])]=t[i];return e}static createExpression=(r=>(e,...t)=>new RealNode({get:e,set:r},!0,...t))(()=>!1);static check(e){for(var t of this._sys.entries())if(e===t[1])return e.id===t[0]}static createHidden=(t=>function(e){return new RealNode(Object.assign({},e,t))})({display:!1});static afterNow(t,e,r,...i){var s=new Promise(e=>this.eventLoop.then(()=>e(t.apply(r,i))));return e||(this.now=s.catch(o)),s}static protoCreate(e,...t){e=new RealNode({get:e});return e.proto.value=t,e}static createNumber=this.protoCreate.bind(null,function(e=0){if(!Array.isArray(this.proto.value))return+(this.proto.value instanceof RealNode?this.proto.value:this.proto).value;for(var t of this.proto.value)e+=+(t instanceof RealNode?t.value:t);return e});static createString=this.protoCreate.bind(null,function(){if(Array.isArray(this.proto.value)){for(var e=this.proto.value.concat(),t=e.length;0<t--;)e[t]instanceof RealNode&&(e[t]=e[t].value);return e.join("")}return String((this.proto.value instanceof RealNode?this.proto.value:this.proto).value)});static async time(e,t){var r=s.now(),i={time:null,error:null,value:null};try{i.value=await("function"==typeof e?e():e)}catch(e){console.error(i.error=e)}if(i.time=s.now()-r,"function"==typeof t)try{t(i.time,i.error,i.value)}catch(e){console.error(e)}return i}static copyObj=function e(t){if(Object(t)!==t)return new.target?Object(t):t;var r,i=Array.isArray(t)?[]:Object.create(null);for(r of Object.keys(t))95!==r.charCodeAt(0)&&(i[r]=e(t[r]));return i};static _react(e,t=!0,r=!0,i=!0){try{for(var s,o=this._getPositionsOfChildRN(e);o.length;){var a=o.pop().reverse();if(!a.length)return this.realSet(e.value,t,r,i);for(s=this.proto.value;1<a.length;)s=s[a.pop()];e.value!==s[a[0]]&&(s[a[0]]=e.value)}return t&&this.react?.(i),r&&this.notify(i),!0}catch(e){if(this instanceof RealNode)throw e;this.error('Please avoid using method "react" of typeof '+this?.name+" !\n"+e.message)}}protoReact(){}protoGet(){return this.proto.value}log(...e){console.log(this+":",...e)}done(){return RealNode.justNow(this.protoDone,this)}error(e){throw new Error(this+'\n"""\n'+String(e)+'\n"""')}protoSet(e){return e!==this.proto.value&&(this.proto.value=e,!0)}clearChildRNs(){for(;this.proto.childRNs.length;)this.proto.childRNs.pop().display=!1;return this}realReact(e=!0,t){var r=this.proto.react;return!!r&&(r.call(this),e&&this.notify(t),!0)}[Symbol.toPrimitive](e){try{return"number"===e?Number(this.value):"[object "+this.constructor.name+"]{ "+this.id.description+" }"}catch{return NaN}}async protoDone(){for(var e=0;e<this.notifyArray.length;)await Promise.allSettled(this.notifyArray[e++]);return e=this.notifyArray,this.notifyArray=[],e}notify(t,e,r){for(var i of this.relativeRNs)Promise.resolve(RealNode.search(i)).then(e=>!e||t&&this===e||e.realReact?.())}realSet(e,t,r,i){try{var s;return(this.proto.set.call(this,this.proto.tryRealNode&&(s=this._computePositionsOfRNs(e)).length?this._dealWithPositionsOfRNs(s,e):e)??!0)&&(t&&this.react?.(),r&&this.notify(i),!0)}catch(e){return console.error(e),e}}_getPositionsOfChildRN(e){for(var t,r=this.proto.childRNs,i=[],s=r.length;0<s--;)e===(t=r[s].info.values()).next().value&&i.push(...t);return i}protoNotify(r,i,s=0){i?s++:i=this,(i.notifyArray[s]||(i.notifyArray[s]=[])).push(new Promise(e=>{for(var t of this.relativeRNs)r&&t===this.id||!(t=RealNode.search(t))||(t.react?.(),t.notify(r,i,s));e()}))}relate(...e){for(var t=e[e.length-1],r=RealNode.search(t?.id??t);e.length;)"symbol"!=typeof(t=e.pop())&&(t instanceof RealNode?t=t.id:this.error('=> "relativeRNs['+e.length+']" is not legal id !')),RealNode.search(t)&&!this.relativeRNs.includes(t)&&this.relativeRNs.push(t);return r}unrelate(...e){if(!e.length)return!1;var t=this.relativeRNs.concat(),r=e.length;for(this.relativeRNs.splice(0);0<r--;)"symbol"!=typeof e[r]&&(e[r]=e[r]?.id);for(r=t.length;0<r--;)e.includes(t[r])||this.relativeRNs.push(t[r]);return t.length!==this.relativeRNs.length}_computePositionsOfRNs(e,t=2,r=[],i=0){var s,o,a=[];if(e instanceof RealNode)a.push((r.unshift(e),r));else if(i<t&&Object(e)===e)for(s=(o=Reflect.ownKeys(e)).length;0<s--;)a=a.concat(this._computePositionsOfRNs(e[o[s]],t,[...r,o[s]],i+1));return a}_dealWithPositionsOfRNs(e,t){var r,i,s,o=this.clearChildRNs().proto.childRNs,a=[];for(e=e.concat();e.length;){var n=e.pop(),l=n[0],n=n.slice(1);if(n.length){for(r=t,i=0,s=n.length-1;i<s;i++)r=r[key];r[n[i]]=l.value}else t=l.value;(i=a.indexOf(l))<0?(a.push(l),o.push(l.relate(new RealNode({info:[l,n],react:this.constructor._react.bind(this,l)})))):o[i].info.push(n)}return t}get id(){return this.proto.id}get childRNs(){return this.proto.childRNs}get value(){return this.get()}set value(e){this.realSet(e,!0,!0)}get set(){return this.realSet}set set(e){this.proto.set="function"==typeof e?e:this.protoSet}get get(){return this.proto.get}set get(e){this.proto.get="function"==typeof e?e:this.protoGet}get react(){return this.proto.react}set react(e){this.proto.react="function"==typeof e?e:e?this.protoReact:null}get display(){return RealNode._sys.has(this.id)}set display(e){e?RealNode._sys.set(this.id,this):RealNode._sys.delete(this.id)}get tryRealNode(){return this.proto.tryRealNode}set tryRealNode(e){e=(this.proto.tryRealNode=Boolean(e))?"appear":"disappear";for(var t=this.proto.childRNs.length;0<t--;)this.proto.childRNs[e]()}relativeRNs=[];notifyArray=[];constructor(e,t=RealNode.tryRealNode,...r){e=Object(e),this.proto=new this.constructor.proto,this.proto.id=Symbol(String(e.id??e.info?.id??"")),Reflect.defineProperty(this,"notifyArray",{enumerable:!1}),Reflect.defineProperty(this,"proto",a),this.display=e.display??!0,this.info=e.info,this.get=e.get,this.set=e.set,this.react=e.react,this.relate(...r),this.proto.value=e.initValue,this.tryRealNode=t,"value"in e&&(this.value=e.value)}},RealGroup=class RealGroup extends RealNode{static tempProxy=class extends Function{static arr=[];apply(){return this.self}ownKeys(){return Reflect.ownKeys(this)}has(e,t){return Reflect.has(this,t)}construct(){return this.realGroup.getByFilter()}isExtensible(){return Reflect.isExtensible(this)}["get"](e,t){return this.realGroup.get(t)}preventExtensions(){return Reflect.preventExtensions(this)}deleteProperty(e,t){return Reflect.deleteProperty(this.self,t)}setPrototypeOf(e,t){return Reflect.setPrototypeOf(this,t)}["set"](e,t,r){return this.realGroup.set(Object.create(null,{[t]:{value:r}}))}defineProperty(e,t,r){return Reflect.defineProperty(this.self,t,r)}constructor(e,t){super(""),this.self=e,this.realGroup=t}};static groupMap=new Map;static _=()=>!0;static createDeepGroup=function e(t,r="",i,s){if(Object(t)!==t)return s?i?RealNode.createHidden({id:r,initValue:t}):t:new RealGroup;var o=Reflect.getPrototypeOf(t);if(o&&o!==Object.prototype)return s?i?RealNode.createHidden({id:r,initValue:t}):t:new RealGroup({self:t});for(var a=Object.create(null),n=Reflect.ownKeys(t),l=n.length,h=0;h<l;h++)a[n[h]]=e(t[n[h]],n[h],i,!0);return new RealGroup({self:a})};keys(e){return e?Reflect.ownKeys(this.proxy()):Object.keys(this.proxy())}realSet(e,t,r){try{return this.protoSet(e)&&(t&&this.notify(r),!0)}catch(e){return console.error(e),e}}addSetterListener(e,t){var r;t&&("function"!=typeof t&&this.error('"listener" must be function !'),e=e||RealGroup._,Array.isArray(r=this.listenerMap.get(e))||this.listenerMap.set(e,r=[]),r.push(t))}protoReact(e=RealGroup.tempProxy.arr){var t,r,i,s;Array.isArray(e)||this.error('"keyArray" must be Array !');for({0:i,1:s}of this.listenerMap)if("function"==typeof i?i(e):-1!==e.indexOf(i))for(r=s.length,t=0;t<r;t++)try{s[t]()}catch(e){this.log("Wrong with ",s[t])}}tryRealNodeSetter(){for(var e=this.proxy(),t=Reflect.ownKeys(e),r=t.length;0<r--;)Reflect.has(Reflect.getOwnPropertyDescriptor(e,t[r]),"get")||e[t[r]]instanceof RealNode||(e[t[r]]=RealNode.createHidden({initValue:e[t[r]]}));return this}getByFilter(e){for(var t=this.proxy(),r=Reflect.ownKeys(t),i="function"!=typeof e,s=Object.create(null),o=r.length;0<o--;)(i||e(r[o]))&&Reflect.set(s,r[o],t[r[o]]instanceof RealNode?t[r[o]].value:t[r[o]]);return s}protoSet(e){if(Object(e)!==e)return!1;var t,r=this.proxy(),i=[];for(t of Reflect.ownKeys(Object(e)))e[t]instanceof RealNode?(r[t]=e[t],i.push(t)):r[t]instanceof RealNode?r[t].set(e[t],!0,!0,!0)&&i.push(t):e[t]!==r[t]&&(r[t]=e[t],i.push(t));if(i.length)try{this.react?.(i)}catch(e){this.log(e?.stack)}return Boolean(i.length)}protoGet(e){if(!arguments.length)return this.getByFilter();if(Object(e)!==e)return(i=this.proxy()[e])instanceof RealNode?i.value:i;for(var t=this.proxy(),r=Reflect.ownKeys(Object(e)),i=Object.create(null),s=r.length;0<s--;)Reflect.set(i,r[s],t[r[s]]instanceof RealNode?t[r[s]].value:t[r[s]]);return i}get proxy(){return this.proto.value}get set(){return this.realSet}set set(e){}get get(){return this.protoGet}set get(e){}get react(){return this.protoReact}set react(e){}get tryRealNode(){return!1}set tryRealNode(e){e&&this.log("I can not try realNode !")}listenerMap=new Map;constructor({id:e,info:t,self:r=Object.create(null)}={}){var i;if((i=RealGroup.groupMap.get(r))instanceof RealGroup)return console.log('Please do not new for "self":'+r+" again !"),i;super({id:e,info:t}),Object(r)!==r&&this.error('"self" not typeof object !'),Reflect.defineProperty(this,"listenerMap",a),i=new RealGroup.tempProxy(r,this),this.proto.value=new Proxy(i,i),RealGroup.groupMap.set(r,this)}},RealTarget=class RealTarget extends RealNode{static proto=class extends RealNode.proto{self;isElement;transform};static searchByObj=function(e){var t=[];if(Object(e)===e)for(var r of RealTarget._sys.values())e===r.self&&t.push(r);return t};static _react(e,t=!0,r=!0,i=!0){try{for(var s,o=this._getPositionsOfChildRN(e);o.length;){var a=o.pop().reverse();if(!a.length)return this.realSet(e.value,t,r,i);for(s=this.proto.value;1<a.length;)s=s[a.pop()];e.value!==s[a[0]]&&(s[a[0]]=e.value)}return this.fix(),t&&this.react?.(i),r&&this.notify(i),!0}catch(e){if(this instanceof RealTarget)throw e;this.error('Please avoid using method "react" of typeof '+this?.name+" !\n"+e.message)}}protoTransform(e){return e}fix(){return this.self[this.key]=this.transform(this.proto.value),this}clearClassName(){return this.proto.isElement&&!(this.proto.self.className="")}addClassName(){return this.proto.isElement&&(this.proto.self.classList.add(...arguments),!0)}toggleClassName(e){return this.proto.isElement&&this.proto.self.classList.toggle(e)}removeClassName(){return this.proto.isElement&&(this.proto.self.classList.remove(...arguments),!0)}getIndexWithin(){for(var e=0,t=this.proto.self;t=t.previousElementSibling;)e++;return e}realSet(e,t,r,i){try{var s;return(this.proto.set.call(this,this.tryRealNode&&(s=this._computePositionsOfRNs(e)).length?this._dealWithPositionsOfRNs(s,e):e)??!0)&&(this.fix(),t&&this.react?.(),r&&this.notify(i),!0)}catch(e){return console.error(e),e}}applyCSS(e,t){this.proto.self instanceof l||this.error("I am not RealElement !");var r=e;if("string"!=typeof e){for(;(r=r?.parentElement)&&r!==this.proto.self;);r?e=" #"+(e.id||(e.id=RealElement.getRandomId())):this.error('"selfSelector" must be String or my descendant !')}var i=this.proto.self.id||(this.proto.self.id=RealElement.getRandomId());return!!(t="string"==typeof t?RealElement.myStyle.get(t):Object(t))&&(RealElement.addCSSRules("#"+i+(/^[A-Za-z]/.test(e)?" ":"")+e,t),RealElement.addId(i,!1),!0)}clone(e,t,r){var i={self:this.proto.self instanceof l?this.proto.self.cloneNode():Object.assign(Object.create(Reflect.getPrototypeOf(this.proto.self)),this.proto.self),key:this.key,transform:this.transform},i=new RealTarget(i,{get:this.proto.get,set:this.proto.set,react:this.proto.react,id:this.id.description+"-clone",info:this.info,initValue:e?this.proto.value:void 0});return Reflect.setPrototypeOf(i,Reflect.getPrototypeOf(this)),null==r&&(i.relativeRNs=r?this.relativeRNs:this.relativeRNs.concat()),t?i.fix():i}get isElement(){return this.proto.isElement}get transform(){return this.proto.transform}set transform(e){this.proto.transform="function"==typeof e?e:this.protoTransform}get self(){return this.proto.self}set self(e){Object(e)===e?this.proto.isElement=(this.proto.self=e)instanceof l:this.error('=> "self" must be Object !')}constructor({self:e,key:t,transform:r},i,s,...o){super(i,s),this.proto,this.self=e,this.key=t,this.transform=r,s&&this.realSet(i.initValue),this.relate(...o),this.addClassName(this.constructor.name)}},RealElement=class RealElement extends RealTarget{get self(){return this.proto.self}set self(e){Object(e)===e?this.proto.isElement=(this.proto.self=e)instanceof l:this.error('=> "self" must be Element !')}static idSet=new Set;static findId(e){return this.idSet.has(e)}static deleteId(e){return"string"!=typeof e&&console.error('=> Please use String "id" !'),this.idSet.delete(e)}static getRandomId(){for(var e;this.idSet.has(e="C3"+Math.floor(1e14*Math.random()).toString(36)););return e}static addId(e,t=!0){e&&("string"!=typeof e?this.error('=> Please use String "id" !'):this.idSet.has(e)?t&&this.error('=> Please use another "id" !'):this.idSet.add(e))}static myStyle=new Map;static selectorEventListeners={};static keyboardController=(u&&addEventListener("keydown",e=>{if(!/^(TEXTAREA)|(SELECT)|(INPUT)$/.test(document.activeElement?.tagName)){var t,r,i,s=document.querySelector(".onkeyboardControl")??document.querySelector(".keyboardController");if(s){switch(e.key){case RealElement.keyboardController?.previous:t=-1;break;case RealElement.keyboardController?.next:t=1;break;case RealElement.keyboardController?.enter:(r=RealTarget.searchByObj(s)[0])instanceof RealDivList?r.proto.list.length?(s.classList.remove("onkeyboardControl"),(r=r.proto.list[0]).classList.add("onkeyboardControl")):(r=s).click():(r=s.querySelector(".keyboardController"))?(s.classList.remove("onkeyboardControl"),r.classList.add("onkeyboardControl")):(r=s).click();break;case RealElement.keyboardController?.back:for(r=s;(r=r.parentElement)&&!r.classList.contains("keyboardController"););(r?(s.classList.remove("onkeyboardControl"),r):r=s).classList.add("onkeyboardControl")}if(t++){for(i=t?"nextElementSibling":"previousElementSibling",(r=s).classList.remove("onkeyboardControl");(r=r[i])&&"none"===getComputedStyle(r).display;);(r=r||s.parentElement[t?"firstElementChild":"lastElementChild"]).classList.add("onkeyboardControl")}r&&r.animate({opacity:[1,0,1]},{duration:500})}}}),{previous:"ArrowUp",next:"ArrowDown",enter:"ArrowRight",back:"ArrowLeft"});static makeElementByString=(()=>{let t=u?document.createElement("template"):{content:{}};return Object.assign(function(e){return t.innerHTML=String(e),t.content.firstElementChild},{_clear(){return t.innerHTML="",t.content}})})();static createImg(){return new RealElement({self:document.createElement("img"),key:"src"})}static createVideo(){return new RealElement({self:document.createElement("video"),key:"src"})}static createAudio(){return new RealElement({self:document.createElement("audio"),key:"src"})}static createDiv(e,t=""){return new RealElement({self:document.createElement("div"),key:"textContent"},{id:e,initValue:t})}static createTextarea(e){return new RealElement({self:RealElement.makeElement("textarea",{placeholder:String(e)}),key:"value"})}static makeElement(e,t,r){return e instanceof l||(e=document.createElement(e)),Object.assign(Object.assign(e,t).style,r),e}static applyKeyboardController(){for(var e of arguments)e instanceof l?e.classList.add("keyboardController"):e?.self instanceof l&&e.self.classList.add("keyboardController")}static cancelKeyboardController(){for(var e of arguments)e instanceof l?e.classList.remove("keyboardController"):e?.self instanceof l&&e.self.classList.remove("keyboardController")}static addEventListenerBySelectors=(e,t,r)=>{let i=t.replace(t[0],t[0].toUpperCase());e&&"*"!==e?(RealElement.selectorEventListeners[t]||(RealElement.selectorEventListeners[t]=new Map,addEventListener(t,a=>{var e=s.now();RealElement.selectorEventListeners[t].forEach((e,t)=>{var r=a,i=e,e=t;try{if(Array.from(document.querySelectorAll(e)).includes(r.target))for(var s=0,o=i.length;s<o;)try{i[s++](r)}catch(r){console.error,alert(r?.stack)}}catch(r){console.error(r)}}),h(i+"-listeners completed\nin "+(s.now()-e).toFloat()+" ms.")})),RealElement.selectorEventListeners[t].has(e)?RealElement.selectorEventListeners[t].get(e).push(r):RealElement.selectorEventListeners[t].set(e,[r])):addEventListener(t,r)};static addCSSRules=(()=>{if(!u){let e=()=>e;return e._css=RealWorld.onload,e}var r=RealWorld.onload.then(function(){document.getElementsByTagName("head")[0].appendChild(document.createElement("style"))[!window.createPopup&&"appendChild"]?.(document.createTextNode("")),r=document.styleSheets[document.styleSheets.length-1]});let n=/^\.([A-Za-z][A-Z0-9a-z]{0,})$/,l=/[A-Za-z]$/,h=/^[A-Za-z]/,c=e=>Object(e)===e?Object.keys(e):[];var i=globalThis.CSSStyleSheet.prototype.insertRule?(e,t)=>r.insertRule(e+"{\n"+t+"}",r.cssRules.length):(e,t)=>r.addRule(e,t,-1),d=(e,t)=>r instanceof Promise?r.then(()=>(d=i)(e,t)):(d=i)(e,t);function f(t,r){try{if(Array.isArray(t)){let e=t.length;for(;0<e--;)"string"==typeof t[e]&&f(t[e],r);return f}"string"!=typeof t&&RealElement.error('"prefix" in addCSSRules must be String !');for(var e of c(r)){var i,s=r[e],o=[];for(i of c(s))o.push(i,":",String(s[i]),";\n");d(t+(l.test(t)&&h.test(e)?" ":"")+e+" ",o.join(""))}var a=n.exec(t)?.[1];a&&RealElement.myStyle.set(a,Object.assign({},RealElement.myStyle.get(a),r))}catch(e){console.error(e)}return f}return f._css=r,f})();static defaultInit=(()=>{var e=!1;return()=>e?RealWorld.onload:RealWorld.onload=(e=!0,RealWorld.onload.then(()=>RealNode.time(()=>{RealElement.addCSSRules("",{"*":{margin:"0",padding:"0",border:"0","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"},":root":{"--mapWidth":"1920px","--halfBlack":"rgba(0, 0, 0, 0.5)","--halfWhite":"rgba(225, 225, 225, 0.5)","--noColor":"rgba(0, 0, 0, 0)"},pre:{"text-align":"left","align-content":"left","vertical-align":"top","white-space":"pre-wrap","word-wrap":"break-word"},html:{cursor:"default","background-color":"black",color:"white"},body:{transform:"rotate(0)","transform-origin":"50vmin 50vmin",overflow:"visible scroll"},"body>*":{position:"absolute"},hr:{border:"1px solid white,"},"::-webkit-scrollbar":{display:"none"}})(".coverBody",{"":{width:"100vmax",height:"56.25vmax"}})(".noDisplay",{"":{display:"none"}})(".disappear",{"":{visibility:"hidden"}})(".listDown",{"":{"writing-mode":"horizontal-tb"},">*":{position:"relative",display:"block"}})(".listRight",{"":{"writing-mode":"vertical-lr"},">*":{position:"relative",display:"block"}})(".listDownListRight",{"":{"writing-mode":"horizontal-tb"},">*":{position:"relative",display:"block","writing-mode":"vertical-lr"},">*>*":{position:"relative",display:"block"}})(".listRightListDown",{"":{"writing-mode":"vertical-lr"},">*":{position:"relative",display:"block","writing-mode":"horizontal-tb"},">*>*":{position:"relative",display:"block"}})("div.listClose",{"":{"writing-mode":"horizontal-tb"},">*":{position:"absolute"},">:nth-child(1)":{"z-index":"1"},">:nth-child(2)":{"z-index":"2"},">:nth-child(3)":{"z-index":"3"},">:nth-child(4)":{"z-index":"4"},">:nth-child(5)":{"z-index":"5"},">:nth-child(6)":{"z-index":"6"},">:nth-child(7)":{"z-index":"7"},">:nth-child(8)":{"z-index":"8"},">:nth-child(9)":{"z-index":"9"},">:nth-child(10)":{"z-index":"10"},">:nth-child(11)":{"z-index":"11"},">:nth-child(12)":{"z-index":"12"},">:nth-child(13)":{"z-index":"13"},">:nth-child(14)":{"z-index":"14"},">:nth-child(15)":{"z-index":"15"}})("div.listFar",{"":{"writing-mode":"horizontal-tb"},">*":{position:"absolute"},">:nth-last-child(1)":{"z-index":"1"},">:nth-last-child(2)":{"z-index":"2"},">:nth-last-child(3)":{"z-index":"3"},">:nth-last-child(4)":{"z-index":"4"},">:nth-last-child(5)":{"z-index":"5"},">:nth-last-child(6)":{"z-index":"6"},">:nth-last-child(7)":{"z-index":"7"},">:nth-last-child(8)":{"z-index":"8"},">:nth-last-child(9)":{"z-index":"9"},">:nth-last-child(10)":{"z-index":"10"},">:nth-last-child(11)":{"z-index":"11"},">:nth-last-child(12)":{"z-index":"12"},">:nth-last-child(13)":{"z-index":"13"},">:nth-last-child(14)":{"z-index":"14"},">:nth-last-child(15)":{"z-index":"15"}})(".onhover",{":hover":{background:"linear-gradient(#fff,#000,#000,#fff)"}})(".onactive",{":active":{background:"linear-gradient(#000,#fff,#fff,#000)"}})(".childOnhover",{">:hover":{background:"linear-gradient(#fff,#000,#000,#fff)"}})(".childOnactive",{">:active":{background:"linear-gradient(#000,#fff,#fff,#000)"}})(".relativeSquare",{"":{width:"20vmin",height:"20vmin"}})(".fontTitle",{"":{"font-size":"20vmin"}})(".fontHead",{"":{"font-size":"10vmin"}})(".fontNormal",{"":{"font-size":"3vmin"}})(".scrollY",{"":{overflow:"hidden scroll"}})(".scrollX",{"":{overflow:"scroll hidden"}})(".scrollXY",{"":{overflow:"scroll"}})(".scrollNone",{"":{overflow:"hidden"}})(".centerCenter",{"":{"text-align":"justify","align-items":"center","align-content":"center","vertical-align":"baseline","justify-content":"center"}})(".autoFull",{"":{width:"100vmax",height:"100vmin"}})(".selfCenterCenter",{"":{left:"50%",top:"50%",transform:"translate(-50%,-50%)"}})._css.finally()},e=>h("Init defaultCSS\nin "+e.toFloat()+" ms."))))})()};{let e=function(e,t){this.resolve=e,this.reject=t},t=function(){if(!new.target)return new t;this.resolve=null,this.reject=null,this.promise=new Promise(e.bind(this))};var RealStory=new class RealStory{newPage(){return new RealStory(this)}newPrivatePage(t){return new Promise(e=>e(t?.(this.newPage())))}then(e){return"function"==typeof e&&this.fnList.unshift(e),this}getNextPage(){var e;if(this.ofStory instanceof RealStory)return(e=this.ofStory.pages)[e.indexOf(this)+1]}getPreviousPage(){var e;if(this.ofStory instanceof RealStory)return(e=this.ofStory.pages)[e.indexOf(this)-1]}newPromiseObj(){let e=new t;return this.then(()=>e.promise),e}async launch(){for(var t=0,e=this;(e=e.ofStory)instanceof RealStory;)t++;for(t||(r=!0);this.pages.length||this.fnList.length;){for(;this.fnList.length;)try{this.info=await this.fnList.pop()?.(this.info)}catch(e){console.error("Depth of the fn : "+t+"\n"+String(e?.stack??e))}try{await this.pages.shift()?.launch?.()}catch(e){console.error("Depth of the page : "+t+"\n"+String(e?.stack??e))}}t||(r=!1)}get StoryPromise(){return t}get index(){return this.ofStory instanceof RealStory?this.ofStory.pages.indexOf(this):-1}ofStory;pages=[];fnList=[];info;constructor(e){(this.ofStory=e instanceof RealStory&&e)&&e.pages.push(this)}};let r=!1;Reflect.getPrototypeOf(RealStory).constructor=i(()=>r||RealStory.launch(),50)}var RealCanvas,RealLoader,RealSelect,RealComtag,RealDivList,RealImgList,RealDivQueue,createRealDivSelect,createRealDivSearch,createRealDivSeries,RealPromise=new class RealPromise{newOne(e){return new RealPromise(e)}catch(e){return this.self=Promise.resolve(this.self).catch(e),this}finally(e){return this.self=Promise.resolve(this.self).finally(e),this}_push(e){return this.list.push(e),e}_throw(e){throw this.list.push(e),e}then(e,t){return this.self=Promise.resolve(this.self).then(e,t).then(this._push,this._throw),this}async tryHandler(e,t){if("function"!=typeof e)throw new TypeError('"handler" must be Function !');try{await this.self}catch(e){console.error(this.length,e)}for(var r=this.length;0<r--;)try{try{return e(await this.list[r])}catch(e){(t??console.error)(e)}}catch(e){console.error(e)}}get require(){return RealPromise.require}static require=(()=>{let i={},s=/[^\/]+\/\.\.\//g;return n?function(e){return this instanceof RealPromise&&this._push(Promise.resolve(r(String(e))))}:u?function(e){var t,r;if(e=String(e).replaceAll("\\","/"),!(this instanceof RealPromise))return Promise.reject();for(;s.test(e);)e=e.replaceAll(s,"");return i[e]||(i[e]=(t=RealStory.StoryPromise(),document.head.appendChild(r=RealElement.makeElement("script",{onload:t.resolve,onerror:t.reject,src:e})),this._push(t.promise.finally(function(){this.remove()}.bind(r)))))}:function(){return Promise.reject(new Error("Mode error !"))}})();get length(){return this.list.length}list=[];constructor(e){Reflect.defineProperty(this,"list",a),Reflect.defineProperty(this,"_push",{value:this._push.bind(this),enumerable:!1,writable:!1}),Reflect.defineProperty(this,"_throw",{value:this._throw.bind(this),enumerable:!1,writable:!1}),this.self=Promise.resolve(e).then(this._push,this._throw)}}(RealWorld.onload);RealPromise.self.finally(()=>RealNode.time(RealWorld.onload,e=>h("Set up\nin "+e.toFloat()+" ms."))),u?(RealCanvas=class RealCanvas extends RealElement{static proto=class extends RealTarget.proto{temp=document.createElement("canvas").getContext("2d");backup=document.createElement("canvas").getContext("2d");img=new Image;isElement=!0;clearBeforeDraw=!0;ctx};static noCache=!0;static srcImageMap=new Map;static strN(e,t){for(var r=String(e).length;t-- >r;)e="0"+e;return e}static getImageBySrc=(()=>{function t(e,t,r){let i=RealCanvas.srcImageMap.get(e)??new Image;i.src?t(i):!e||"string"!=typeof e||RealCanvas.noCache&&RealCanvas.srcImageMap.has(e)?r():Object.assign(i,{onload:()=>(RealCanvas.srcImageMap.set(e,i),i.onload=i.onerror=t(i)),onerror:r,src:e})}return e=>new Promise(t.bind(null,e))})();static getRealGroupToClear=(()=>{class a{x=0;y=0;radiusX;radiusY;shape;relative}return function(e,{initFn:t,fnBeforeClear:r,fnAfterClear:i}={}){if(!(e instanceof RealCanvas))throw new Error('=> "realCanvas" must be instanceof RealCanvas !');"function"==typeof i&&(i=i.bind(e)),"function"==typeof r&&(r=r.bind(e));let s=new a,o=new RealGroup({self:s});return o.addSetterListener(null,async()=>{await Promise.resolve(e.loaded).then(r),await e.clearShape(s,s.shape).then(i)}),e.loaded.finally(t),o}})();protoTransform(){}protoGet(){return this.loaded.then(()=>this.proto.value)}clearAsync(){return this.loaded=Promise.resolve(this.loaded).then(()=>this.clear())}fix(e=this.proto.temp.canvas){(this.proto.clearBeforeDraw?this.clear():this.proto.ctx).drawImage(e,0,0)}testSrc(e){return this.loaded=Promise.resolve(this.loaded).then(()=>RealCanvas.getImageBySrc(e)).then(()=>!0,this.rejectSrc.bind(this,e))}clear(){return this.proto.ctx.clearRect(0,0,this.proto.self.width,this.proto.self.height),this.proto.ctx.closePath(),this.proto.ctx}clearTemp(){return this.proto.temp.clearRect(0,0,this.proto.self.width,this.proto.self.height),this.proto.temp.closePath(),this.proto.temp}rejectSrc(e,t){return e&&console.error(t instanceof Error?t:(RealCanvas.noCache&&t&&RealCanvas.srcImageMap.set(e),this+': Fail to load by src "'+e+'" !')),!1}protoSet(t){return this.loaded=Promise.resolve(this.loaded).then(()=>RealCanvas.getImageBySrc(t)).then(e=>(this.proto.img=e,this.proto.value=t,!0),this.rejectSrc.bind(this,t))}resizeBySrc(e){return this.loaded=Promise.resolve(this.loaded).then(()=>RealCanvas.getImageBySrc(e)).then(e=>{this.self.width!==e.naturalWidth&&(this.width=e.naturalWidth),this.self.height!==e.naturalHeight&&(this.height=e.naturalHeight)})}toBlob(){try{return RealWorld.cb2promise({thisArg:this.self,useFn:"toBlob"}).then(e=>e[0]instanceof Error?(console.error(e[0]),new Blob):e[0])}catch(e){return console.error(e),Promise.resolve(new Blob)}}realSet(e,t,r,i){var s;return this.loaded=Array.isArray(e)?this.multiDrawSrcArray({},...e).then(()=>{this.proto.value=e}):Promise.resolve(this.proto.set.call(this,this.proto.tryRealNode&&(s=this._computePositionsOfRNs(e)).length?this._dealWithPositionsOfRNs(s,e):e)??!0).then(e=>e&&(this.fix(this.img),t&&this.react?.(),r&&this.notify(i),!0)).catch(e=>(console.error(e),e))}multiDrawSrcArray({bgSrc:e,autoOpacity:t,resize:r},...i){var s=-1,o=e??i[0]??!1;if(r&&o&&this.resizeBySrc(o),this.loaded=Promise.resolve(this.loaded).then(()=>this.clearTemp()),Array.isArray(e))for(o=e.length;o>++s;)this.temp=e[s];else e&&"string"==typeof e&&(this.temp=e);if(1<i.length&&t)for(s=i.length,o=0;0<s--;)this.tempOpacity=.625**s,this.temp=i[o++];else for(s=-1,o=i.length;o>++s;)this.temp=i[s];return this.loaded=Promise.resolve(this.loaded).then(()=>{this.fix(this.proto.temp.canvas)},e=>alert(e.stack))}applyMouseClear({radiusX:t,radiusY:r,relative:i}={},s){let o=this.proto.self,e=this.proto.backup,a=getComputedStyle(o),n=()=>(e.canvas.width=o.width,e.canvas.height=o.height,e.drawImage(o,0,0)),l=e=>(h(),this.clearShape({x:e.offsetX*o.width/+a.width.slice(0,-2),y:e.offsetY*o.height/+a.height.slice(0,-2),radiusX:t,radiusY:r,relative:i},s)),h=()=>this.clear().drawImage(e.canvas,0,0);return o.addEventListener("mouseenter",n),o.addEventListener("mouseleave",h),o.addEventListener("mousemove",l),()=>(o.removeEventListener("mouseenter",n),o.removeEventListener("mouseleave",h),o.removeEventListener("mousemove",l))}clearShape({x:a=0,y:n=0,radiusX:l,radiusY:h,relative:c}={},d){var e=!1;return"number"==typeof l?"number"!=typeof h&&(h=l):"number"==typeof h?l=h:e=!0,(e=e||!Number.isFinite(l+h))?Promise.reject(new Error('"radiusX": '+String(l)+' or "radiusY": '+String(h)+" must be legal number !")):("number"!=typeof a&&(a=0),"number"!=typeof n&&(n=0),(e=e||!Number.isFinite(a+n))?Promise.reject(new Error('"x": '+String(a)+' or "y": '+String(n)+" must be legal number !")):this.loaded=Promise.resolve(this.loaded).then(()=>{var e,t=this.proto.self,r=this.proto.temp,i=0;if(l=Math.abs(c?l*this.width/2:l),h=Math.abs(c?h*this.height/2:h),r.canvas.width=t.width,r.canvas.height=t.height,r.drawImage(t,0,0),"rect"!==d){a=Math.round(a),n=Math.round(n),l=Math.ceil(l);for(var s=(h=Math.ceil(h))**2,o=s/l**2;i++<l;)e=Math.floor(Math.sqrt(s-i**2*o))+1,r.clearRect(a-i,n-e,2*i,2*e)}else r.clearRect(Math.floor(a-l),Math.floor(n-h),Math.ceil(2*l),Math.ceil(2*h)),this.clear().drawImage(r.canvas,0,0);this.clear().drawImage(r.canvas,0,0)}).catch(e=>console.error(e)))}animate({prefix:r,suffix:i,startN:s=0,length:o,midLength:a,bgSrc:n,playMode:l=0,timeSep:h=100,sizeMode:c="std",resizeAfter:d=!0}={}){let f={width:this.width,height:this.height},e=[1,2,3,5];var u=s+o+l;for(o*=e[l]??1,h/=e[l]??1;u-- >s;)this.testSrc(r+RealCanvas.strN(u,a)+i);return u=0,{loaded:this.loaded,finished:this.loaded.then(()=>{var e;let t=new RealWorld(h);switch("auto"===c&&(e=!0),l){default:for(;0<o--;)t.then(this.multiDrawSrcArray,this,{bgSrc:n,resize:e},r+RealCanvas.strN(s++,a)+i);case 1:for(;0<o--;)t.then(this.multiDrawSrcArray,this,{bgSrc:n,autoOpacity:!0,resize:e},(u=!u)||r+RealCanvas.strN(s++,a)+i,!1,r+RealCanvas.strN(s,a)+i);break;case 2:for(;0<o--;)t.then(this.multiDrawSrcArray,this,{bgSrc:n,autoOpacity:!0,resize:e},1===u?r+RealCanvas.strN(s+1,a)+i:2===u&&r+RealCanvas.strN(s,a)+i,!1,u<2?r+RealCanvas.strN(s,a)+i:r+RealCanvas.strN(s+1,a)+i),3==++u&&(s++,u%=3);break;case 3:for(;0<o--;)t.then(this.multiDrawSrcArray,this,{bgSrc:n,autoOpacity:!0,resize:e},1===u?r+RealCanvas.strN(s+1,a)+i:4===u&&r+RealCanvas.strN(s,a)+i,!1,2===u?r+RealCanvas.strN(s+1,a)+i:3===u&&r+RealCanvas.strN(s,a)+i,!1,u<3?r+RealCanvas.strN(s,a)+i:2<u&&r+RealCanvas.strN(s+1,a)+i),5==++u&&(s++,u%=5)}return t.then(()=>(this.clearTemp(),d&&Object.assign(this,f),t.destroy()))})}}get ctx(){return this.proto.ctx}get img(){return this.proto.img}get imgW(){return this.proto.img.naturalWidth}get imgH(){return this.proto.img.naturalHeight}get width(){return this.proto.self.width}set width(e){this.proto.self.width=this.proto.temp.canvas.width=e??640}get height(){return this.proto.self.height}set height(e){this.proto.self.height=this.proto.temp.canvas.height=e??360}get self(){return this.proto.self}set self(e){e instanceof HTMLCanvasElement&&(this.proto.ctx=(this.proto.self=e).getContext("2d"))}get clearBeforeDraw(){return this.loaded.then(()=>this.proto.clearBeforeDraw)}set clearBeforeDraw(e){this.loaded=Promise.resolve(this.loaded).then(()=>this.proto.clearBeforeDraw=e)}get temp(){return this.proto.temp.canvas}set temp(e){return this.proto.set.call(this,e).then(()=>(this.proto.temp.drawImage(this.img,0,0),!0),this.rejectSrc.bind(this,e))}get opacity(){return this.loaded.then(()=>this.proto.ctx.globalAlpha)}set opacity(t){Array.isArray(t)||(t=[t]),this.loaded=Promise.resolve(this.loaded).then(()=>t[0]).then(e=>{this.proto.ctx.globalAlpha=e*(t[1]??1)})}set tempOpacity(t){Array.isArray(t)||(t=[t]),this.loaded=Promise.resolve(this.loaded).then(()=>t[0]).then(e=>{this.proto.temp.globalAlpha=e*(t[1]??1)})}loaded=RealNode.now;constructor(e,t,r,i,...s){var o="string"==typeof e?document.getElementById(e):(e="",!1);o&&"canvas"!==o.tagName.toLocaleLowerCase()&&RealNode.error('=> "id" exists but not within an HTMLCanvasElement !'),RealElement.addId(e,!o),super({self:o||RealElement.makeElement("canvas",{id:e})},{id:e},i,...s),this.proto,this.width=t,this.height=r,this.proto.ctx=this.proto.self.getContext("2d")}},RealLoader=class RealLoader extends RealElement{static proto=class extends RealTarget.proto{onerror;onloadend};static fs=(()=>{class l{get stat(){return l.stat}get readdir(){return l.readdir}}return l.fetch=(()=>{let t=e=>e.status<300?[,e]:RealLoader.error("Failed request !");return u&&"file:"===document.location.protocol?e=>fetch(e,{mode:"no-cors"}).then(t):e=>fetch(e).then(t)})(),l.stat=n?async e=>RealWorld.cb2promise({thisArg:await r("fs"),useFn:"stat"},e):e=>l.fetch(e).catch(e=>[e]),l.readdir=n?async e=>RealWorld.cb2promise({thisArg:await r("fs"),useFn:"readdir"},e):async(e,...t)=>{try{var r,i=t.length,s=[],o=i;for(/\/$/.test(e)||(e+="/");0<o--;)if(Array.isArray(t[o]))for(r=t[o].length;0<r--;)t[o][r]=String(t[o][r]);else{var a=String(t[o]);if("\\"===a[0])switch(a[1]){case"w":t[o]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";break;case"d":t[o]="0123456789"}else t[o]=[a]}for(var n=Array(i).fill(0);!("-1"in n);){for(r="",o=0;o<i;o++)r+=t[o][n[o]];for(h(e+r),(await l.stat(e+r))[0]||h(s.push(r),r),n[(o=i)-1]++;0<o--;)t[o].length>n[o]||(n[o]=0,n[o-1]++)}return[null,s]}catch(e){return[e,[]]}},new l})();static _configDescriptor=(u&&RealWorld.onload.then(()=>RealElement.addEventListenerBySelectors(".RealLoader","click",e=>{for(let t of RealTarget.searchByObj(e.target))if(t instanceof RealLoader){RealLoader.load(t).then(e=>e[0]?t.onerror?.(e[0]):t.onloadend?.(e[1])),t.react?.(),t.notify(!0);break}})),{writable:!1,enumerable:!1,configurable:!1});static getArrayBufferFrom(e){return Promise.resolve(e instanceof ArrayBuffer?e:ArrayBuffer.isView(e)?e.buffer:(e instanceof Blob?e:new Blob(Array.isArray(e)?e.join(""):String(e))).arrayBuffer())}static load=n?async t=>{try{if("upload"===t.type)return t.temp.click(),[];let i=await r("fs"),s=await t.dataGetter(),{1:o="file",2:a=""}=/(.+)(\..+)/.exec(t.temp.download)||[];return RealWorld.cb2promise({thisArg:i,useFn:"stat"},"./"+t.temp.download).then(async e=>{if(e||this.error("Unknown Error !"),e[0])return RealLoader.getArrayBufferFrom(s).then(e=>RealWorld.cb2promise({thisArg:i,useFn:"writeFile"},"./"+t.temp.download,Buffer.from(e)));for(var r=1;;r++){1;{let t="./"+o+" - "+r+a;if((await RealWorld.cb2promise({thisArg:i,useFn:"stat"},t))[0])return RealLoader.getArrayBufferFrom(s).then(e=>RealWorld.cb2promise({thisArg:i,useFn:"writeFile"},t,Buffer.from(e))).then(e=>[e[0],r])}}})}catch(e){return[e]}}:(()=>{let r=e=>new Blob(e);return async e=>{try{var t;return"upload"===e.type?(e.temp.click(),[]):(t=await e.dataGetter(),Promise.resolve("string"==typeof t?new Blob([t]):t instanceof Blob?t:RealLoader.getArrayBufferFrom(t).then(r)).then(function(e){return e=URL.createObjectURL(e),this.temp.href=e,this.temp.click(),URL.revokeObjectURL(e),[]}.bind(e)).catch(e=>[e]))}catch(e){return[e]}}})();load(){return RealLoader.load(this)}protoSet(e){return this.self[this.key]=String(e),!1}get files(){return"upload"===this.type?this.temp.files:this.error("I'm an downloader without files !")}get onerror(){return this.proto.onerror}set onerror(e){this.proto.onerror="function"==typeof e?e:null}get onloadend(){return this.proto.onloadend}set onloadend(e){this.proto.onloadend="function"==typeof e?e:null}get fileName(){return"upload"===this.type?this.error('Uploader bans "fileName" !'):this.temp.download}set fileName(e){"upload"===this.type&&this.error('Uploader bans "fileName" !'),"symbol"==typeof e&&this.error('"fileName" must be String but not Symbol !'),n&&!/^\.\//.test(e)&&(e="./"+e),this.temp.download=e}dataGetter;constructor(e,t,r,{innerHTML:i,onerror:s,onloadend:o}={}){super({self:document.createElement("div"),key:"innerHTML"}),this.proto,this.onerror=s,this.onloadend=o,this.dataGetter=r,this.value=i,e=Boolean(e),this.type=e?"download":"upload",this.temp=document.createElement(e?"a":"input"),Reflect.defineProperty(this,"type",RealLoader._configDescriptor),Reflect.defineProperty(this,"temp",RealLoader._configDescriptor),e?this.fileName=t||"file":this.temp.type="file"}},RealSelect=class RealSelect extends RealElement{static proto=class extends RealTarget.proto{list=[]};static _react(e,t=!0,r=!0,i=!0){try{for(var s,o,a=this._getPositionsOfChildRN(e);a.length;){var n=a.pop().reverse(),l=e.value;if(!n.length)return this.realSet(l,t,r,i);for(s=this.proto.value;1<n.length;)s=s[n.pop()];if(l!==s[n[0]]&&(s[n[0]]=l),s===this.proto.value){o=0;for(var h of Object.keys(s)){if(h===n[0]){this.proto.list[o].value=String(l);break}o++}}}return t&&this.react?.(i),r&&this.notify(i),!0}catch(e){if(this instanceof RealSelect)throw e;this.error('Please avoid using method "react" of typeof '+this?.name+" !\n"+e.message)}}protoSet(e){return this.proto.value=Object.assign({},e),!0}fix(){return this.self[this.key]=this.protoTransform(this.proto.value),this.proto.list=Array.from(this.self.children),this}getValueIndexs(){for(var e=this.proto.list.length,t=[];0<e--;)this.proto.list[e].selected&&t.push(e);return t.reverse()}protoGet(){for(var e=[],t=this.proto.list,r=t.length,i=0;i<r;i++)t[i].selected&&e.push(t[i].value);return e}protoTransform(e,t=String(this.defaultKey),r=String(this.defaultValue)){this instanceof RealSelect&&!this.self.multiple&&(e=Object.assign({[t]:r},e));for(var i,s=[],o=Object.entries(e).sort((e,t)=>e[0].localeCompare(t[0])).sort((e,t)=>e[0]-t[0]).values();!(i=o.next()).done;)s.push(`<option value="${String(i.value[1])}" ${i.value[0]===t?"selected":""}>${i.value[0]}</option>`);return s.join("")}get list(){return this.proto.list}constructor(e,t,r,i,s,o,a){var n="string"==typeof e?document.getElementById(e):(e="",!1);n&&("select"===n.tagName.toLocaleLowerCase()?Object.assign(n,{multiple:t,onchange:a}):RealNode.error('=> "id" exists but not within an HTMLSelectElement !')),RealElement.addId(e,!n),super({key:"innerHTML",self:n||RealElement.makeElement("select",{id:e,multiple:t,onchange:a})},{id:e,initValue:Object.assign({},r)},i),this.proto,this.defaultKey=s??"_",this.defaultValue=o??"",this.fix()}},RealComtag=class RealComtag extends RealElement{static comtagClassMap=new Map;static defineComtagClass(e,t,r,i,s,o){/^([A-Za-z]\w*)$/.test(e)||this.error('Illegal "className" !'),this.comtagClassMap.has(e)&&this.error('"className" repeated !'),r?.[Symbol.iterator]||this.error('"optionList" must be Array !'),this.addCSSRules("."+e,s),this.comtagClassMap.set(e,[t,r,i,"function"==typeof o?o:null])}static createByClassName(e,...t){var r=this.comtagClassMap.get(e),i=(r||this.error('"className" not found !'),new RealComtag("",r[0],r[1],r[2]));return r[3].apply(i,t),i.addClassName(e),i}fix(){for(var e=this.transform(this.proto.value),t=e.length,r=0,i=RealElement.makeElementByString._clear();r<t;)i.appendChild(e[r++]);return this.self.innerHTML="",this.self.appendChild(i),this}protoTransform(e){if(e?.[Symbol.iterator]){var t,r=[];for(t of e)r.push(t instanceof l?t:document.createElement(String(t)));return r}throw new Error('=> "value" must be Arraylike !')}protoSet(e){if(e?.[Symbol.iterator]){for(var t=this.proto.value[Symbol.iterator](),r=e[Symbol.iterator](),i=Array(2);i[0]=t.next(),i[1]=r.next(),!i[0].done^i[1].done&&!i[0].done;)if(i[0].value!==i[1].value)return this.proto.value=Array.from(e),!0;return!1}throw new Error('=> "value" must be Arraylike !')}constructor(e,t,r,i,s){var o="string"==typeof e?document.getElementById(e):(e="",!1);RealElement.addId(e,!o),super({self:o||RealElement.makeElement("div",{id:e})},{id:e,initValue:r?.[Symbol.iterator]?Array.from(r):[]},i),this.proto,this.tryHTML=t,Object.assign(this.fix().self,s)}},RealDivList=class RealDivList extends RealElement{static proto=class extends RealTarget.proto{list=[];childrenList=[]};static divListClassMap=new Map;static createList(e=0,t,r,i){for(var s=[];0<e--;)s.push(document.createElement(t));return new RealDivList(r,!0,s,RealDivList.tryRealNode,i)}static _react(e,t=!0,r=!0,i=!0){try{for(var s,o=this._getPositionsOfChildRN(e);o.length;){var a=o.pop().reverse().concat(),n=e.value;if(!a.length)return this.realSet(n,t,r,i);for(s=this.proto.value;1<a.length;)s=s[a.pop()];n!==s[a[0]]&&(s[a[0]]=n),s===this.proto.value&&((a[1]=this.proto.list[a[0]]).innerHTML=""),n instanceof l?a[1].appendChild(n):a[1][this.tryHTML?"innerHTML":"textContent"]=n}return t&&this.react?.(i),r&&this.notify(i),!0}catch(e){if(this instanceof RealDivList)throw e;this.error('Please avoid using method "react" of typeof '+this?.name+" !\n"+e.message)}}static defineDivListClass(e,t,r,i,s,o){/^([A-Za-z]\w*)$/.test(e)||this.error('Illegal "className" !'),this.divListClassMap.has(e)&&this.error('"className" repeated !'),r?.[Symbol.iterator]||this.error('"optionList" must be Array !'),this.addCSSRules("."+e,s),this.divListClassMap.set(e,[t,r,i,"function"==typeof o?o:null])}static createByClassName(e,...t){var r=this.divListClassMap.get(e),i=(r||this.error('"className" not found !'),new RealDivList("",r[0],r[1],r[2]));return r[3].apply(i,t),i.addClassName(e),i}protoGet(){return this.proto.list}protoSet(e){return this.proto.value=Array.from(e),!0}protoTransform(e){var t,r=[];if(e?.[Symbol.iterator]){for(var i=e[Symbol.iterator]();!(t=i.next()).done;)r.push(t.done=document.createElement("div")),t.value instanceof l?t.done.appendChild(t.value):t.done[this.tryHTML?"innerHTML":"textContent"]=String(t.value);return r}throw new Error('=> "value" must be Arraylike !')}getIdDict(e,t){var r,i=Object.create(null),s=this.proto.list.length;if(e)for(;0<s--;)1<(r=this.proto.childrenList[s]).length||!r[0]?.id||(i[r[0].id]=new RealElement({self:this.proto.list[s],key:t}));else for(;0<s--;)1<(r=this.proto.childrenList[s]).length||!r[0]?.id||(i[r[0].id]=this.proto.list[s]);return i}getRealEmentList(){for(var e=this.proto.list.concat(),t=e.length;0<t--;)e[t]=new RealElement({self:e[t]});return e}fix(){for(var e=0,t=this.proto.list=this.transform(this.proto.value),r=this.proto.childrenList=[],i=RealElement.makeElementByString._clear();e<t.length;)r.push(Array.from(i.appendChild(t[e++]).children));return this.self.innerHTML="",this.self.appendChild(i),this}get childrenList(){return this.proto.childrenList}constructor(e,t,r,i,s){var o="string"==typeof e?document.getElementById(e):(e="",!1);RealElement.addId(e,!o),super({self:o||RealElement.makeElement("div",{id:e})},{id:e,initValue:r?.[Symbol.iterator]?Array.from(r):[]},i),this.proto,this.tryHTML=t,Object.assign(this.fix().self,s)}},RealImgList=class RealImgList extends RealDivList{static _react(e,t=!0,r=!0,i=!0){try{for(var s,o=this._getPositionsOfChildRN(e);o.length;){var a=o.pop().reverse(),n=e.value;if(!a.length)return this.realSet(n,t,r,i);for(s=this.proto.value;1<a.length;)s=s[a.pop()];n!==s[a[0]]&&(s[a[0]]=n),s===this.proto.value&&(this.proto.childrenList[a[0]][0].src=String(n?.src??n))}return t&&this.react?.(i),r&&this.notify(i),!0}catch(e){if(this instanceof RealImgList)throw e;this.error('Please avoid using method "react" of typeof '+this?.name+" !\n"+e.message)}}cloneImgList(){for(var e=this.childrenList.concat(),t=e.length;0<t--;)e[t]=e[t][0].cloneNode();return e}protoTransform(e){var t,r=[];if(!e?.[Symbol.iterator])throw new Error('=> "value" must be Arraylike !');for(var i=e[Symbol.iterator]();!(t=i.next()).done;)r.push(t.done=document.createElement("div")),t.done.appendChild(t.value instanceof Image?t.value:Object.assign(new Image,{src:String(t.value)}));return r}protoSet(e){if(e?.[Symbol.iterator]){for(var t=this.proto.value[Symbol.iterator](),r=e[Symbol.iterator](),i=Array(2);i[0]=t.next(),i[1]=r.next(),!i[0].done^i[1].done&&!i[0].done;)if((i[0].value?.src??String(i[0].value))!==(i[1].value?.src??String(i[1].value)))return this.proto.value=Array.from(e),!0;return!1}throw new Error('=> "value" must be Arraylike !')}constructor(e,t,r,i){super(e,!0,t,r,i)}},RealDivQueue=class RealDivQueue extends RealDivList{static proto=class extends RealDivList.proto{queueArray};static tempTarget=void(u&&(RealWorld.onload.then(()=>RealElement.addCSSRules(".RealDivQueue",{">div:hover":{transform:"scale(1.1,1)"},">div:active":{transform:"scale(1.2,1)"}})),addEventListener("mousedown",e=>RealDivQueue.tempTarget=e.target),addEventListener("mouseup",e=>{for(var t,r,i=[r=RealDivQueue.tempTarget];r=r.parentElement;)i.push(r);for(var s=[r=e.target];r=r.parentElement;)s.push(r);if(i.pop()===s.pop()){for(r=[];(r[0]=i.pop())===(r[1]=s.pop());)if(!i.length)return;var[e,o]=r;if(e&&o){var a=e.parentElement;if(a.classList.contains("RealDivQueue")){for(t of RealTarget.searchByObj(a))if(t instanceof RealDivQueue)break;a=t.queueArray,a=(r[0]=a.indexOf(t.proto.list.indexOf(r[0])))>(r[1]=a.indexOf(t.proto.list.indexOf(r[1])))?a.slice(0,r[1]).concat(a[r[0]],a.slice(r[1],r[0]),a.slice(r[0]+1)):a.slice(0,r[0]).concat(a.slice(r[0]+1,r[1]+1),a[r[0]],a.slice(r[1]+1)),t.applyQueue(a,e,o)}}}})));getListQueue(){this.proto;for(var e=this.queueArray,t=e.length;0<t--;)e[t]=this.proto.list[e[t]];return e}fix(){for(var e=0,t=this.proto.list=this.transform(this.proto.value),r=this.proto.childrenList=[];e<t.length;)r.push(Array.from(t[e++].children));return this.applyQueue([])}applyQueue(e,t,r){for(var i=this.queueArray??[],s=Array.isArray(e),o=(e=s?e.slice(0,this.proto.list.length):i,this.proto.list.concat()),a=o.length,n=this.self.scrollTop,l=this.self.scrollLeft,h=a;0<h--;)null==e[h]&&(e[h]=h),-1===e.indexOf(h)&&this.error('Illegal "queueArray" !');if(-1!==(h=[i.indexOf(this.proto.list.indexOf(t)),i.indexOf(this.proto.list.indexOf(r))])[0]&&-1!==h[1])h[0]<h[1]?r.insertAdjacentElement("afterend",t):r.insertAdjacentElement("beforebegin",t);else{for(var h=0,c=RealElement.makeElementByString._clear();h<a;)c.appendChild(o[e[h++]]);this.self.classList.add("disappear"),this.self.innerHTML="",this.self.appendChild(c),this.self.scrollTo({top:n,left:l,behavior:"instant"}),this.self.classList.remove("disappear")}return this.proto.queueArray=e,s&&(this.react?.(),this.notify(!0)),this}get queueArray(){return this.proto.queueArray?.concat?.()}},createRealDivSelect=(e,t,r)=>RealDivList.createByClassName("realDivSelect",e,t,r),RealWorld.onload=RealWorld.onload.finally(()=>RealDivList.defineDivListClass("realDivSelect",!1,[],!0,{"":{background:"linear-gradient(135deg,#fff,#000)"},">div":{"background-color":"#333",transform:"scale(0.8,1)"},">div:hover":{transform:"scale(0.9,1)"},">.selected":{"background-color":"#555",transform:"scale(1)","font-weight":"bolder"}},(()=>{let t={bubbles:!0,cancelable:!1};function i(){for(var e=[],t=this.proto.list,r=0;t[r];r++)t[r].classList.contains("selected")&&e.push(this.info.optionList[r]);return this.info.multiple||e.length||!r||(t[0].classList.add("selected"),e.push(this.info.optionList[0])),e}function s(e){for(var t of(this.info.optionList=[],this.proto.value=Object.keys(e=Object(e)).sort().sort((e,t)=>e-t)))this.info.optionList.push(e[t]);return this.fix().value,!1}async function a(e){return e.react?.(),await e.notify(),e.self.dispatchEvent(new Event("change",t))}return RealElement.addEventListenerBySelectors(".realDivSelect>div","click",e=>{for(var t,r=RealTarget.searchByObj(e.target.parentElement),i=0;(t=r.pop())&&(!t||!t.self.classList.contains("realDivSelect")););if(t){var s=t,o=s.value[0],r=s.proto.list;if(s.info.multiple)e.target.classList.toggle("selected"),a(s);else{for(;t=r[i++];)t.classList[e.target===t?"add":"remove"]("selected");o!==s.value[0]&&a(s)}}}),function(e,t,r){this.get=i,this.set=s,this.info=Object(this.info),this.info.multiple=Boolean(t),"function"==typeof r&&(this.self.onchange=r.bind(this)),this.value=e}})())),createRealDivSearch=e=>RealDivList.createByClassName("realDivSearch",e),RealWorld.onload=RealWorld.onload.finally(()=>RealDivList.defineDivListClass("realDivSearch",!0,[],!0,{">:nth-child(2)>div>div:hover":{transform:"scale(0.9,1)"}},(()=>{var i;let t={bubbles:!0,cancelable:!1},r=Promise.resolve();function s(){return this.info.inputer.value}function o(e){return Array.isArray(e)?this.info.wordList=e:this.error('"value must be Array !'),r.then(()=>this.info.inputer.dispatchEvent(new Event("input",t))),!((i=i||this).info.matcher.value={})}return addEventListener("click",t=>RealNode.afterNow(()=>{var e;e=t.target,i&&e!==i.info.inputer&&(i.info.matcher.value={},i.react?.(),i.notify(!0))})),RealElement.addEventListenerBySelectors(".realDivSearch>:nth-child(2)>div>div","click",e=>{for(var t,r=RealTarget.searchByObj(e.target.parentElement.parentElement.parentElement);(t=r.pop())&&(!t||!t.self.classList.contains("realDivSearch")););t&&(t.info.inputer.value=t.info.matcher.value[0],(i=t).react?.(),i.notify(!0))}),RealElement.addEventListenerBySelectors(".realDivSearch>:nth-child(1)>textarea","input",e=>{for(var r,t=RealTarget.searchByObj(e.target.parentElement.parentElement);(r=t.pop())&&(!r||!r.self.classList.contains("realDivSearch")););if(r){let t=new RegExp(r.info.inputer.value,"i");r.info.matcher.value=RealNode.arrayToObject(r.info.wordList.filter(e=>t.test(String(e))))}}),RealElement.addEventListenerBySelectors(".realDivSearch>:nth-child(1)>textarea","click",e=>{r.then(()=>e.target.dispatchEvent(new Event("input",t)))}),function(e){var t=RealDivList.createByClassName("realDivSelect");this.proto.value=['<textarea placeholder="'+String(e)+'"></textarea>',t.self],this.fix().info=Object(this.info),this.info.inputer=this.proto.childrenList[0][0],this.info.matcher=t,this.info.wordList=[],this.get=s,this.set=o}})())),createRealDivSeries=e=>RealDivList.createByClassName("realDivSeries",e),RealWorld.onload=RealWorld.onload.finally(()=>RealDivList.defineDivListClass("realDivSeries",!1,[],!0,{">div:nth-child(1)":{"font-weight":"bolder"},".hidden>div:nth-child(n + 2)":{display:"none"}},(()=>{function t(e){return t["function"==typeof e?"fn":e instanceof RealNode?"realNode":"str"].bind(this,e)}RealElement.addEventListenerBySelectors(".realDivSeries>div:nth-child(1)","click",e=>{for(var t,r=RealElement.searchByObj(e.target?.parentElement);(t=r.pop())&&(!t||!t.self.classList.contains("realDivSeries")););t&&t.toggleClassName("hidden")});let r=[];return t.fn=function(e,t){return this.protoTransform(r.concat(e(),t))},t.str=function(e,t){return this.protoTransform(r.concat(String(e),t))},t.realNode=function(e,t){return this.protoTransform(r.concat(String(e.value),t))},function(e){this.transform=t.call(this,e),this.fix()}})()))):h("No DOM !"),h("Sync\nin "+(s.now()-e).toFloat()+" ms.")}exports=Object.assign(exports??{},{RealWorld:RealWorld,RealStory:RealStory,RealPromise:RealPromise,RealNode:RealNode,RealGroup:RealGroup,RealTarget:RealTarget,RealElement:RealElement,createRealDivSelect:createRealDivSelect,createRealDivSearch:createRealDivSearch,createRealDivSeries:createRealDivSeries,RealCanvas:RealCanvas,RealLoader:RealLoader,RealSelect:RealSelect,RealComtag:RealComtag,RealDivList:RealDivList,RealImgList:RealImgList,RealDivQueue:RealDivQueue});
//# sourceMappingURL=./real-node-cjs.min.js.map